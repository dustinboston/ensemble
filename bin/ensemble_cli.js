var Vt=Object.defineProperty;var rn=(e,t,o)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var un=(e,t)=>{for(var o in t)Vt(e,o,{get:t[o],enumerable:!0})};var Q=(e,t,o)=>(rn(e,typeof t!="symbol"?t+"":t,o),o);import*as Qs from"qjs:os";import*as ae from"qjs:std";var P={};un(P,{AstNode:()=>$,AtomNode:()=>Te,BooleanNode:()=>Me,DomNode:()=>be,ErrorNode:()=>Ae,ErrorTypes:()=>ce,FunctionNode:()=>De,KeywordNode:()=>Pe,ListNode:()=>fe,MapNode:()=>Ve,NilNode:()=>Le,NumberNode:()=>oe,StringNode:()=>le,SymbolNode:()=>de,VectorNode:()=>he,assertArgumentCount:()=>s,assertAstNode:()=>A,assertAtomNode:()=>M,assertBooleanNode:()=>dn,assertDefined:()=>Oe,assertDomNode:()=>an,assertEq:()=>cn,assertEqual:()=>kt,assertErrorNode:()=>$e,assertEvenArgumentCount:()=>Se,assertFunctionNode:()=>w,assertGreaterThanEqual:()=>gn,assertIsOneOf:()=>fn,assertKeywordNode:()=>ln,assertListNode:()=>_,assertMapKeyNode:()=>W,assertMapNode:()=>O,assertMetadataType:()=>Ye,assertMinimumArgumentCount:()=>D,assertNilNode:()=>rt,assertNullOrUndefined:()=>mn,assertNumberNode:()=>p,assertRegExp:()=>ye,assertSequential:()=>X,assertSequentialValues:()=>te,assertStringNode:()=>d,assertSymWithValue:()=>ve,assertSymbol:()=>ut,assertSymbolNode:()=>K,assertTrue:()=>An,assertUndefined:()=>Nn,assertVariableArgumentCount:()=>h,assertVectorNode:()=>v,continueResult:()=>ke,convertMapKeyToString:()=>ne,convertStringToMapKey:()=>yt,copy:()=>H,copyAtomNode:()=>It,copyBooleanNode:()=>Rt,copyDomNode:()=>qt,copyErrorNode:()=>Ut,copyFunctionNode:()=>$t,copyKeywordNode:()=>Ot,copyListNode:()=>Kt,copyMapNode:()=>Bt,copyNilNode:()=>Gt,copyNumberNode:()=>Wt,copyStringNode:()=>jt,copySymbolNode:()=>Ht,copyVectorNode:()=>_t,createAtomNode:()=>R,createBooleanNode:()=>m,createDomNode:()=>Ce,createDomNodeFromHtmlElement:()=>pt,createErrorNode:()=>N,createFunctionNode:()=>B,createInvalidElementError:()=>z,createKeywordNode:()=>ge,createListNode:()=>C,createMapNode:()=>V,createNilNode:()=>r,createNumberNode:()=>a,createStringNode:()=>l,createSymbolNode:()=>b,createVectorNode:()=>f,deleteMapElement:()=>We,getBareMapKey:()=>Ie,getMapElement:()=>He,getMapKeys:()=>_e,getMapValues:()=>vn,hasMapElement:()=>je,htmlEncode:()=>bn,isAstNode:()=>S,isAstTruthy:()=>Ke,isAtomNode:()=>ue,isBooleanNode:()=>se,isDefined:()=>Fe,isDomNode:()=>pe,isEqualTo:()=>re,isErrorNode:()=>J,isFunctionNode:()=>G,isKeywordNode:()=>Y,isListNode:()=>L,isMapKeyNode:()=>Ft,isMapNode:()=>E,isNilNode:()=>F,isNumberNode:()=>x,isSameClass:()=>Lt,isSequentialNode:()=>j,isStringNode:()=>T,isSymbolNode:()=>U,isTypedVector:()=>hn,isVectorNode:()=>I,listStartsWithSymbol:()=>Xe,mapFlat:()=>Ze,normalizeWhitespace:()=>Cn,returnResult:()=>Ne,setMapElement:()=>Ge,slash:()=>Qe,splitAtFirstDot:()=>xn,toAst:()=>i,toErrorNode:()=>En,unwrap:()=>Z,unwrapAtomNode:()=>Qt,unwrapBooleanNode:()=>zt,unwrapDomNode:()=>Sn,unwrapErrorNode:()=>Jt,unwrapFunctionNode:()=>Yt,unwrapKeywordNode:()=>Xt,unwrapListNode:()=>Zt,unwrapMapNode:()=>ze,unwrapNilNode:()=>eo,unwrapNumberNode:()=>me,unwrapStringNode:()=>Ee,unwrapSymbolNode:()=>to,unwrapVectorNode:()=>oo,validTypesString:()=>Re});var pn="atom, boolean, DOM, error, function, keyword, list, map, null, number, string, symbol, or vector",$=class{line=0;column=0;setPosition(t=0,o=0){return this.line=t,this.column=o,this}getPosition(){return{line:this.line,column:this.column}}};Q($,"kind");var it=class extends ${constructor(o){super();this.value=o}get kind(){return it.kind}},Te=it;Q(Te,"kind","Atom");var at=class extends ${constructor(o){super();this.value=o}get kind(){return at.kind}},Me=at;Q(Me,"kind","Boolean");var dt=class extends ${constructor(o,n=new Map,u=[],y){super();this.value=o;this.attributes=n;this.children=u;this.metadata=y}line=0;column=0;get kind(){return dt.kind}},be=dt;Q(be,"kind","DOM");var ce=(g=>(g.Error="Error",g.AggregateError="AggregateError",g.RangeError="RangeError",g.ReferenceError="ReferenceError",g.SyntaxError="SyntaxError",g.TypeError="TypeError",g.URIError="URIError",g))(ce||{}),yn=["Error","AggregateError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ue=class extends ${constructor(o,n,u=r()){super();this.value=o;n!==void 0&&Ue.isErrorName(n)&&(this.name=n),u!==void 0&&(this.cause=u)}name=l("Error");cause;get kind(){return Ue.kind}static isErrorName(o){let n=o.value;return yn.includes(n)}static assertErrorName(o){if(!Ue.isErrorName(o))throw N("Error type must be 'Error', 'AggregateError', 'RangeError', 'ReferenceError', 'SyntaxError', 'TypeError', or 'URIError'.","TypeError",o)}toString(){let o=this.cause?this.cause:r();return`<error ${`<str "${this.name||"Error"}: [${o.line}:${o.column}]" ${this.value}>`}>`}},Ae=Ue;Q(Ae,"kind","Error");var lt=class extends ${constructor(o,n,u=!1,y){super();this.value=o;this.closureMeta=n;this.isMacro=u;this.metadata=y}get kind(){return lt.kind}},De=lt;Q(De,"kind","Function");var ct=class extends ${constructor(o){super();this._value=o;this._value=o.replaceAll(":","")}get kind(){return ct.kind}get value(){return`${this._value}:`}set value(o){this._value=`${o.replaceAll(":","")}:`}get bare(){return this._value}},Pe=ct;Q(Pe,"kind","Keyword");var Nt=class extends ${constructor(o,n){super();this.value=o;this.metadata=n}get kind(){return Nt.kind}},fe=Nt;Q(fe,"kind","List");var mt=class extends ${constructor(o=new Map,n){super();this.value=o;this.metadata=n}get kind(){return mt.kind}},Ve=mt;Q(Ve,"kind","Map");var At=class extends ${constructor(o=null){super();this.value=o}get kind(){return At.kind}},Le=At;Q(Le,"kind","Null");var ft=class extends ${constructor(o){super();this.value=o}get kind(){return ft.kind}},oe=ft;Q(oe,"kind","Number");var ht=class extends ${constructor(o){super();this.value=o}get kind(){return ht.kind}},de=ht;Q(de,"kind","Symbol");var gt=class extends ${constructor(o){super();this.value=o}get kind(){return gt.kind}},le=gt;Q(le,"kind","String");var vt=class extends ${constructor(o,n){super();this.value=o;this.metadata=n}get kind(){return vt.kind}},he=vt;Q(he,"kind","Vector");function an(e){if(!pe(e))throw z(e)}function A(e){if(!S(e))throw z(e)}function M(e){if(!ue(e))throw z(e)}function dn(e){if(!se(e))throw z(e)}function O(e){if(!E(e))throw z(e)}function $e(e){if(!J(e))throw z(e)}function w(e){if(!G(e))throw z(e)}function ln(e){if(!Y(e))throw z(e)}function _(e){if(!L(e))throw z(e)}function rt(e){if(!F(e))throw z(e)}function p(e){if(!x(e))throw z(e)}function d(e){if(!T(e))throw z(e)}function K(e){if(!U(e))throw z(e)}function v(e){if(!I(e))throw z(e)}function ye(e){if(!(e instanceof RegExp))throw N("Expected a regular expression.","TypeError")}function ut(e){if(typeof e!="symbol")throw N("Expected a symbol.","TypeError")}function Ce(e,t,o,n){return new be(e,t,o,n)}function pt(e){let t=e.tagName.toLowerCase(),o=new Map;for(let u of e.getAttributeNames()){let y=e.getAttribute(u);o.set(u,y?l(y):r())}return new be(t,o)}function R(e){return new Te(e)}function m(e){return new Me(e)}function V(e,t){return new Ve(e,t)}function N(e="Error",t="Error",o=r()){let n=typeof e=="string"?l(e):e,u=l(t),y=S(o)?o:r();return new Ae(n,u,y)}function z(e){let t=S(e)?`Invalid ${e.kind} element`:"Invalid element";return N(t,"TypeError",e)}function B(e,t,o=!1,n){return new De(e,t,o,n)}function ge(e){return new Pe(e)}function C(e,t){return new fe(e,t)}function r(e){return new Le(e)}function a(e){return new oe(e)}function l(e){return new le(e)}function b(e){return new de(e)}function f(e=[],t){return new he(e,t)}function pe(e){return e instanceof be}function S(e){return ue(e)||se(e)||pe(e)||J(e)||G(e)||Y(e)||L(e)||E(e)||F(e)||x(e)||T(e)||U(e)||I(e)}function ue(e){return e instanceof Te}function se(e){return e instanceof Me&&typeof e.value=="boolean"}function E(e){return e instanceof Ve&&e.value instanceof Map}function J(e){return e instanceof Ae&&S(e.value)}function G(e){return e instanceof De&&typeof e.value=="function"}function Y(e){return e instanceof Pe&&typeof e.value=="string"&&e.value.endsWith(":")}function L(e){return e instanceof fe}function F(e){return e instanceof Le&&e.value===null}function x(e){return e instanceof oe&&typeof e.value=="number"}function T(e){return e instanceof le&&typeof e.value=="string"}function U(e){return e instanceof de&&typeof e.value=="string"}function I(e){return e instanceof he&&e.value.every(S)}function Lt(e,t){return Object.getPrototypeOf(e)===Object.getPrototypeOf(t)}function cn(e,t){if(!re(e,t))throw N("Expected values to be equal but got unequal values","TypeError",e)}function Oe(e){if(e===void 0)throw N("Expected value to be defined but got an undefined value","TypeError",S(e)?e:r())}function Nn(e){if(e!==void 0)throw N("Expected value to be undefined but got a defined value","TypeError",S(e)?e:r())}function mn(e,t){if(e!=null)throw N("Expected value to be null or undefined but got a defined value","TypeError",t)}function Fe(e){return e!==void 0}function An(e){if(e===!1)throw N("Expected value to be true but got false","TypeError",S(e)?e:r())}function Ke(e,t=!1){if(se(e))return e.value;let o=e;return ue(o)?S(o.value)?Ke(o.value):Boolean(o.value):F(e)?!1:x(e)?t?Boolean(e.value):!0:Boolean(e.value)}function j(e){return L(e)||I(e)}function X(e){if(!L(e)&&!I(e)){let t=S(e)?e.kind:"unknown";throw N(`Expected a list or vector type but got ${t.toLowerCase()}`,"TypeError",S(e)?e:r())}}function W(e){if(!(T(e)||U(e)||Y(e))){let t=S(e)?e.kind:"unknown";throw N(`Expected a map key of type string, symbol, or keyword but got ${t}`,"TypeError",S(e)?e:r())}}function Ft(e){return T(e)||U(e)||Y(e)}function Ye(e){if(!G(e)&&!L(e)&&!I(e)&&!E(e)&&!pe(e)){let t=S(e)?e.kind:"unknown";throw N(`Expected a metadata type of function, list, vector or map but got ${t}`,"TypeError",S(e)?e:r())}}function s(e,t,o=r()){if(e!==t){let n=t-e===1?"":"s",u=`Expected ${t} argument${n} but got ${e}`;throw N(u,"TypeError",o)}}function h(e,t,o,n=r()){if(e<t||e>o){let u=`Expected between ${t} and ${o} arguments but got ${e}`;throw N(u,"TypeError",n)}}function D(e,t,o=r()){if(e<t){let n=`Expected at least ${t} arguments but got ${e}`;throw N(n,"TypeError",o)}}function Se(e,t=r()){if(e%2!==0)throw N("Expected an even number of arguments but got an uneven amount.","TypeError",t)}function te(e,t){for(let o of e)if(!(o instanceof t)){let n=S(o)?o.kind:"unknown";throw N(`Expected all values to be of type ${t.kind}, but got ${n}`,"TypeError",e[0]?e[0]:r())}}function fn(e,t){if(!t.some(o=>e instanceof o)){let o=t.map(n=>n.kind).join(", ");throw N(`Expected one of type ${o} but got an invalid type`,"TypeError",e)}}function hn(e,t){return e.value.every(o=>o instanceof t)}function re(e,t){if(j(e)&&j(t)){if(e.value.length!==t.value.length)return m(!1);for(let n=0;n<e.value.length;n++)if(!re(e.value[n],t.value[n]).value)return m(!1);return m(!0)}if(E(e)&&E(t)){if(e.value.size!==t.value.size)return m(!1);for(let[n,u]of e.value){let y=t.value.get(n);if(y===void 0||!re(u,y).value)return m(!1)}return m(!0)}if(!Lt(e,t))return m(!1);let o=e.value===t.value;return m(o)}function Xe(e,t){let o=L(e)&&U(e.value[0]);return o&&t!==void 0?e.value[0].value===t:o}function kt(e,t){if(e!==t)throw N(`Expected a value of ${t} but got ${e}`,"Error")}function gn(e,t){if(e>=t)throw N(`Expected value to be greater than or equal to ${t} but got ${e}`,"Error")}function ve(e,t){kt(e.value,t)}function ke(e,t){return{continue:{ast:e,env:t},return:void 0}}function Ne(e){return{continue:void 0,return:e}}function H(e){if(ue(e))return It(e);if(se(e))return Rt(e);if(E(e))return Bt(e);if(J(e))return Ut(e);if(G(e))return $t(e);if(Y(e))return Ot(e);if(L(e))return Kt(e);if(F(e))return Gt(e);if(x(e))return Wt(e);if(T(e))return jt(e);if(U(e))return Ht(e);if(I(e))return _t(e);if(pe(e))return qt(e);throw N("Expected a value of type atom, boolean, map, DOM, error, functiom, keyword, list, null, number, string, symbol, or vector, but did not find a match.","TypeError",e)}function It(e){return R(H(e.value))}function Rt(e){return m(e.value)}function Bt(e){let t=V(new Map(e.value));return t.metadata=H(e.metadata??r()),t}function qt(e){let t=e.value,o=e.attributes,n=e.children,u=Ce(t,new Map(o),n.map(H));return u.metadata=H(e.metadata??r()),u}function Ut(e){return N(H(e.value))}function $t(e){let t=B(e.value);if(t.isMacro=e.isMacro,t.metadata=H(e.metadata??r()),e.closureMeta){let o=e.closureMeta;t.closureMeta={ast:H(o.ast),env:o.env,parameters:o.parameters.map(n=>b(n.value))}}return t}function Ot(e){return ge(e.value)}function Kt(e){let t=C(e.value.map(o=>H(o)));return t.metadata=H(e.metadata??r()),t}function Gt(e){return r()}function Wt(e){return a(e.value)}function jt(e){return l(e.value)}function Ht(e){return b(e.value)}function _t(e){let t=f(e.value.map(o=>H(o)));return t.metadata=H(e.metadata??r()),t}function Ge(e,t,o){e.set(ne(t),o)}function We(e,t){e.delete(ne(t))}function je(e,t){return e.has(ne(t))}function He(e,t){return e.get(ne(t))}function _e(e){let t=[...e.keys()];return C(t.map(o=>yt(o)))}function ne(e){let t=e;if(Y(t))return t.value;let o=e;return T(o)?`"${o.value}"`:e.value}function yt(e){return e.endsWith(":")?ge(e):e.startsWith('"')?l(e.slice(1,-1)):b(e)}function Ie(e){let t=Ft(e)?e.value:e;return t.endsWith(":")?t.replaceAll(":",""):t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function vn(e){let t=[...e.values()];return C(t)}function Ze(e){let t=[];for(let[o,n]of e.entries())t.push(yt(o),n);return t}function xn(e){let t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]}function bn(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;")}function Cn(e){return e.replaceAll(`
`," ").replaceAll(/\s{2,}/g," ")}function Qe(e){return e.replaceAll("\\","\\\\").replaceAll('"','\\"').replaceAll(`
`,"\\n")}function Z(e){if(ue(e))return Qt(e);if(se(e))return zt(e);if(E(e))return ze(e);if(J(e))return Jt(e);if(G(e))return Yt(e);if(Y(e))return Xt(e);if(L(e))return Zt(e);if(F(e))return eo();if(x(e))return me(e);if(T(e))return Ee(e);if(U(e))return to(e);if(I(e))return oo(e);throw N(`Could not unwrap value. Expected a value of type ${pn}, but did not find a match.`,"TypeError",e)}function Qt(e){return Z(e.value)}function zt(e){return e.value}function Sn(e){return e.value}function Jt(e){let t=T(e.value)?e.value.value:String(Z(e.value));return new Error(t)}function Yt(e){return(...t)=>i(Z(e.value(...t)))}function Xt(e){return e.value}function Zt(e){return e.value.map(Z)}function ze(e){let t={};for(let[o,n]of e.value.entries())t[o]=Z(n);return t}function eo(){return null}function me(e){return e.value}function Ee(e){return e.value}function to(e){return e.value}function oo(e){return e.value.map(Z)}var Re="array, boolean, error, function, keyword, map, null, number, object, string, symbol, or undefined";function i(e){if(S(e))return e;switch(typeof e){case"undefined":return r();case"number":return a(e);case"string":return e.startsWith('"')?l(e):e.startsWith(":")?ge(e):b(e);case"boolean":return m(e);case"symbol":return l(JSON.stringify(e));case"function":return B((...t)=>{try{return i(e(...t.map(o=>o.value)))}catch(o){return o instanceof Error?N(l(o.message)):N(l(JSON.stringify(o)))}});case"object":{if(e instanceof Error)return N(l(e.message));if(e===null)return r();if(Array.isArray(e)){let n=e.map(u=>i(u));return C(n)}if(e instanceof Map){let n=new Map;for(let[u,y]of e.entries()){let c=String(u),g=i(y);n.set(c,g)}return V(n)}let t=e,o=new Map;for(let[n,u]of Object.entries(t)){let y=String(n),c=i(u);o.set(y,c)}return V(o)}default:{let t=String(e);return N(l(`Expected value of type ${Re} but got unknown type ${t}`))}}}function En(e){return J(e)?e:S(e)?N(e):e instanceof Error?N(l(e.message)):N(l(String(e)))}var ie=class{value=new Map;outer;binds=[];exprs=[];constructor(t=void 0,o=[],n=[]){this.outer=t,this.binds=o,this.exprs=n;for(let u=0;u<o.length;u++){let y=o[u];if(y.value==="&"){let g=o[u+1];if(g){let k=n.slice(u),nn=ne(g);this.value.set(nn,C(k));break}}let c=ne(y);this.value.set(c,n[u])}}serialize(){let t=V(),o=V();this.outer&&(o=this.outer.serialize());let n=this.value.entries();for(let[u,y]of n)t.value.set(u,y);return t.value.set("__outer__",o),t}set(t,o){let n=ne(t);return this.value.set(n,o),o}findEnv(t){let o=ne(t);if(this.value.has(o))return this;if(!!Fe(this.outer))return this.outer.findEnv(t)}get(t){let o=this.findEnv(t);if(o===void 0)throw N(`The variable name '${t.value}' has not been declared.`,"ReferenceError",t);let n=ne(t),u=o.value.get(n);return Oe(u),u}};function q(e,t=!1){if(T(e))return t?`"${Qe(e.value)}"`:e.value;if(Y(e)||se(e)||x(e)||U(e))return String(e.value);let o=e;if(ue(o)){if(S(o.value))return`(atom ${q(o.value)})`;if(o.value instanceof HTMLElement){let n=pt(o.value);return`(atom (element ${q(n)}))`}return o.value instanceof Event?`(atom (event ${o.value.type})))`:`(atom #<js ${typeof o.value}>)`}if(J(e)){let n=e.cause?e.cause:r();return`<error ${`<str "${e.name||"Error"}: [${n.line}:${n.column}]" ${q(e.value,t)}>`}>`}if(G(e))return"#<fn>";if(j(e)){let n=L(e),u=e.value.map(y=>q(y,t)).join(" ");return n?`(${u})`:`[${u}]`}if(pe(e))return we(e,t);if(E(e))return`{${Ze(e.value).map(u=>q(u,t)).join(" ")}}`;if(F(e))return"nil";throw N(`Expected type of ${Re} but got ${JSON.stringify(e)}`,"TypeError",e)}var wn=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);function we(e,t=!1){if(pe(e)){let n=e.value,u=wn.has(n),y="";if(e.attributes.size>0&&(y=` ${Array.from(e.attributes).map(([g,k])=>g==="style"?Dn(k,t):`${Ie(g)}="${we(k,t)}"`).join(" ")}`),u)return`<${n}${y} />`;let c=[];if(e.children.length>0){let g=[];n==="style"?g=e.children.map(k=>Mn(k,t)):n==="script"?g=e.children.map(k=>Tn(k,t)):g=e.children.map(k=>we(k,t)),c.push(g.join(" "))}return n==="!doctype"?`<!doctype html>
${c.join(" ")}`:`<${n}${y}>${c.join(" ")}</${n}>`}if(T(e))return t?`"${Qe(e.value)}"`:e.value;if(Y(e)||se(e)||x(e)||U(e))return String(e.value);let o=e;if(ue(o))return`(atom ${we(o.value)})`;if(J(e))return we(e.value,t);if(G(e))return"#<fn>";if(j(e)){let n=L(e),u=e.value.map(y=>we(y,t)).join(" ");return n?`(${u})`:`[${u}]`}if(E(e))return`{${Ze(e.value).map(u=>we(u,t)).join(" ")}}`;if(F(e))return"nil";throw N(`Expected type of ${Re} but got ${JSON.stringify(e)}`,"TypeError",e)}function Tn(e,t=!1){return`
import { rep, initEnv } from '../../bin/ensemble.js';
rep(\`${q(e,!0)}\`, initEnv());
`}function Be(e,t=!1){if(T(e))return t?Qe(e.value):e.value;if(Y(e))return e.value.slice(1);if(x(e))return String(e.value);if(U(e))return e.value;if(J(e))return Be(e.value,t);if(L(e)||I(e))return e.value.map(o=>Be(o,t)).join(" ");if(E(e))return[...e.value].map(([o,n])=>{let u=Ie(o);return F(n)?u:E(n)?`${u} {${Be(n,t)}}`:`${Ie(o)}: ${Be(n,t)};`}).join(" ");if(se(e)||ue(e)||G(e)||pe(e)||F(e))return"";throw N(`Expected type of ${Re} but got ${JSON.stringify(e)}`,"TypeError",e)}function Mn(e,t=!1){return Be(e,t)}function Dn(e,t=!1){return E(e)?Pn(e,t):"{}"}function Pn(e,t=!1){return[...e.value].map(([o,n])=>`${Ie(o)}: ${Be(n,t)};`).join("")}var Vn=/[\s,=]*(~@|[[\]{}()'`~^@<>]|"(?:\\.|[^\\"])*"?|;.*|\/\/.*|\r?\n|[^\s[\]{}<>('"`,;=)]*)/g,Ln=/^-?\d+(\.\d+)?$/,Fn=/"(?:\\.|[^\\"])*"/,xt=class{constructor(t,o=0){this.tokens=t;this.position=o}line=0;next=()=>this.tokens[this.position++];peek=()=>this.tokens[this.position];context=()=>{let t=this.position-10,o=this.position+10;return this.tokens.slice(t,o).join(" ")}};function kn(e){return[...e.matchAll(Vn)].filter(o=>!o[1].startsWith(";")&&!o[1].startsWith("//")&&o[1]!=="").map(o=>o[1])}function ot(e){try{let t=kn(e);return t.length===0?r():bt(new xt(t))}catch(t){let o=t instanceof Error?t.message:String(t);return console.log(`Error reading input: ${o}`),r()}}function bt(e){let t=e.peek();if(t===void 0)throw N("EOF","SyntaxError").setPosition(e.line,e.position);switch(t){case`
`:case`\r
`:return e.line++,e.next(),bt(e);case")":case"]":case"}":case">":throw N(`Unexpected '${t}'`,"SyntaxError").setPosition(e.line,e.position);case"(":return tt(e,")");case"[":return tt(e,"]");case"{":return tt(e,"}");case"<":return tt(e,">");default:return In(e)}}function In(e){let t=e.next();if(t===void 0)throw N("Unexpected end of file","SyntaxError").setPosition(e.line,e.position);if(t==="nil"||t==="null")return r().setPosition(e.line,e.position);if(t==="false")return m(!1).setPosition(e.line,e.position);if(t==="true")return m(!0).setPosition(e.line,e.position);if(Ln.test(t))return a(Number.parseFloat(t)).setPosition(e.line,e.position);if(Fn.test(t))return l(Rn(t)).setPosition(e.line,e.position);if(t.startsWith(":")||t.endsWith(":"))return ge(t).setPosition(e.line,e.position);if(t.startsWith('"'))throw N(`Expected '"' but got end of file`,"SyntaxError").setPosition(e.line,e.position);return b(t).setPosition(e.line,e.position)}function Rn(e){return e.slice(1,-1).replaceAll(/\\(.)/g,(t,o)=>o==="n"?`
`:o)}function tt(e,t){let o=[];for(e.next();;){let n=e.peek();if(n===void 0)throw N(`expected '${t}', got EOF`,"SyntaxError").setPosition(e.line,e.position);if(n===t){e.next();break}o.push(bt(e))}switch(t){case">":case")":return C(o).setPosition(e.line,e.position);case"]":return f(o).setPosition(e.line,e.position);case"}":{let n=V().setPosition(e.line,e.position);for(let u=0;u<o.length;u+=2){let y=o[u];W(y);let c=o[u+1],g=ne(y);n.value.set(g,c)}return n}default:throw N(`unknown end value: ${t}`,"SyntaxError").setPosition(e.line,e.position)}}var ro=new Map,uo=[["eq",po],["throw",Uo],["nil?",Ho],["true?",_o],["false?",Qo],["symbol",St],["Symbol.new",St],["symbol?",Jo],["keyword",Yo],["keyword?",Xo],["number?",Zo],["macro?",ts],["pr-str",yo],["str",io],["prn",ao],["println",Ct],["console.log",Ct],["read-string",lo],["string?",zo],["trim",co],["lt",No],["lte",mo],["gt",Ao],["gte",fo],["add",ho],["subtract",go],["multiply",vo],["divide",xo],["time-ms",bo],["assoc",rs],["contains?",ys],["dissoc",us],["get",ps],["hash-map",Et],["keys",is],["map?",ns],["vals",as],["list",Co],["list?",So],["apply",$o],["fn?",es],["concat",wo],["conj",Ko],["cons",Eo],["count",Fo],["empty?",Lo],["first",Do],["last",Po],["join",ls],["map",Oo],["nth",Mo],["rest",Vo],["seq",Go],["sequential?",ds],["vec",To],["vector",os],["vector?",ss],["meta",Wo],["with-meta",jo],["atom",ko],["atom?",Io],["deref",Ro],["reset!",Bo],["swap!",qo],[".",qn]];for(let[e,t]of uo)ro.set(b(e),B(t));function po(...e){return s(e.length,2),re(e[0],e[1])}function yo(...e){let t=e.map(o=>q(o,!0)).join(" ");return l(t)}function io(...e){let t=e.map(o=>q(o,!1)).join("");return l(t)}function ao(...e){let t=e.map(o=>q(o,!0)).join(" ");return console.log(t),r()}function Ct(...e){let t=e.map(o=>q(o,!1)).join(" ");return console.log(t),r()}function lo(...e){s(e.length,1);let t=e[0];return d(t),ot(t.value)}function co(...e){s(e.length,1);let t=e[0].value;return t?l(t.trim()):l("")}function No(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),m(t.value<o.value)}function mo(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),m(t.value<=o.value)}function Ao(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),m(t.value>o.value)}function fo(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),m(t.value>=o.value)}function ho(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),a(t.value+o.value)}function go(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),a(t.value-o.value)}function vo(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),a(t.value*o.value)}function xo(...e){s(e.length,2);let t=e[0];p(t);let o=e[1];return p(o),a(t.value/o.value)}function bo(...e){return s(e.length,0),a(new Date().getTime())}function Co(...e){for(let t of e)A(t);return C(e)}function So(...e){return s(e.length,1),m(L(e[0]))}function Eo(...e){return s(e.length,2),X(e[1]),new fe([e[0],...e[1].value])}function wo(...e){let t=[];for(let o of e)X(o),t.push(...o.value);return C(t)}function To(...e){return L(e[0])?f(e[0].value):e[0]}function Mo(...e){s(e.length,2),X(e[0]),p(e[1]);let t=e[1].value,o=e[0],n=e[0].value.length;if(n>0&&t<n)return o.value[t];throw N(`Expected an nth index greater than zero and less than ${n} but got ${t} out of range`,"RangeError",t)}function Do(...e){return s(e.length,1),j(e[0])&&e[0].value.length>0?e[0].value[0]:r()}function Po(...e){return s(e.length,1),j(e[0])&&e[0].value.length>0?e[0].value[e[0].value.length-1]:r()}function Vo(...e){return s(e.length,1),j(e[0])?C(e[0].value.slice(1)):C([])}function Lo(...e){s(e.length,1);let t=e[0];return X(t),m(t.value.length===0)}function Fo(...e){s(e.length,1);let t=e[0];if(F(t))return a(0);if(E(e[0]))return a(e[0].value.size);if(j(e[0]))return a(e[0].value.length);throw N(`Expected an length argument of type null, map, list, or vector but got ${t.kind}`,"TypeError",t)}function ko(...e){s(e.length,1);let t=e[0];return R(t)}function Io(...e){s(e.length,1);let t=e[0];return m(ue(t))}function Ro(...e){s(e.length,1);let t=e[0];return M(t),t.value}function Bo(...e){s(e.length,2);let t=e[0],o=e[1];return M(t),t.value=o,o}function qo(...e){D(e.length,2),M(e[0]),w(e[1]);let t=e[0],o=e[1],n=e.slice(2);return t.value=o.value(t.value,...n),t.value}function Uo(...e){throw s(e.length,1),A(e[0]),N(e[0])}function $o(...e){let t=e.length;D(t,2),w(e[0]);let o=e[t-1];return X(o),e[0].value(...e.slice(1,-1),...o.value)}function Oo(...e){let t=e.length;s(t,2),w(e[0]),X(e[1]);let o=e[0],u=e[1].value.map(y=>o.value(y));return C(u)}function Ko(...e){D(e.length,2),X(e[0]);let[t,...o]=e;return L(t)?C([...o.reverse(),...t.value]):f([...e[0].value,...o])}function Go(...e){s(e.length,1);let t=e[0];return L(t)&&t.value.length>0?t:I(t)&&t.value.length>0?C([...t.value]):T(t)&&t.value.length>0?C(t.value.split("").map(o=>l(o))):r()}function Wo(...e){return s(e.length,1),Ye(e[0]),e[0].metadata??r()}function jo(...e){s(e.length,2),Ye(e[0]),A(e[1]);let t=H(e[0]);return t.metadata=e[1],t}function Ho(...e){return s(e.length,1),m(F(e[0]))}function _o(...e){return s(e.length,1),m(se(e[0])&&e[0].value)}function Qo(...e){return s(e.length,1),m(se(e[0])&&!e[0].value)}function zo(...e){return s(e.length,1),m(T(e[0]))}function St(...e){return s(e.length,1),d(e[0]),b(e[0].value)}function Jo(...e){return s(e.length,1),m(U(e[0]))}function Yo(...e){s(e.length,1),W(e[0]);let t=e[0];if(Y(t))return t;let o=e[0];return ge(`:${o.value}`)}function Xo(...e){return s(e.length,1),m(Y(e[0]))}function Zo(...e){return s(e.length,1),m(x(e[0]))}function es(...e){return s(e.length,1),m(G(e[0])&&!e[0].isMacro)}function ts(...e){return s(e.length,1),m(G(e[0])?e[0].isMacro:!1)}function os(...e){return f(e)}function ss(...e){return s(e.length,1),m(I(e[0]))}function Et(...e){if(e.length===0)return V();if(e.length===1&&E(e[0]))return V(new Map(e[0].value));Se(e.length);let t=V();for(let o=0;o<e.length;o+=2){let n=e[o];W(n),Ge(t.value,n,e[o+1])}return t}function ns(...e){return s(e.length,1),m(E(e[0]))}function rs(...e){D(e.length,1),O(e[0]);let t=e.slice(1),o=V(new Map(e[0].value)),n=Et(...t);for(let[u,y]of n.value.entries())o.value.set(u,y);return o}function us(...e){D(e.length,1),O(e[0]);let t=V(new Map(e[0].value));for(let o of e.splice(1))W(o),We(t.value,o);return t}function ps(...e){s(e.length,2);let t=e[0];if(!E(t))return r();let o=e[1];W(o);let n=He(t.value,o);return n!==void 0?n:r()}function ys(...e){s(e.length,2);let t=e[0],o=e[1];return O(t),W(o),m(je(t.value,o))}function is(...e){return s(e.length,1),O(e[0]),_e(e[0].value)}function as(...e){return s(e.length,1),O(e[0]),C([...e[0].value.values()])}function ds(...e){return m(j(e[0]))}function ls(...e){h(e.length,1,2),X(e[0]);let t=T(e[1])?e[1].value:" ",o=e[0].value.map(n=>q(n,!1)).join(t);return l(o)}function Bn(...e){D(e.length,2);let[t,...o]=e,n=o.pop();Oe(n),w(n);let u=o.length;for(let y=0;y<u;y++){let c=o[y];if(_(c),s(c.value.length,2),w(c.value[1]),re(t,c.value[0]).value)return c.value[1].value()}return n.value()}function qn(...e){D(e.length,2),A(e[0]),d(e[1]);let t=e[1].value,o=null,n=e[0].value;if(Array.isArray(n)?o=n:n instanceof Map?o=Object.fromEntries(n):n instanceof Set?o=Array.from(n):n!==null&&typeof n=="object"&&(o=n),o===null)return r();let u=t.split(".").reduce((c,g)=>{if(c[g]!==void 0)return c[g]},o);return R(u)}var xe={add:ho,apply:$o,applyToSequence:Oo,assoc:rs,atom:ko,concat:wo,conj:Ko,cons:Eo,contains:ys,deref:Ro,dissoc:us,divide:xo,empty:Lo,eq:po,firstNodeInList:Do,get:ps,gt:Ao,gte:fo,hashMap:Et,isAtom:Io,isFalse:Qo,isFn:es,isKeyword:Xo,isListNode:So,isMacro:ts,isMap:ns,isNil:Ho,isNumber:Zo,isSequentialNode:ds,isString:zo,isSymbolNode:Jo,isTrue:_o,isVector:ss,join:ls,keys:is,keyword:Yo,lastNodeInList:Po,length:Fo,list:Co,lt:No,lte:mo,meta:Wo,multiply:vo,ns:ro,nsValues:uo,nth:Mo,printEscapedString:yo,printEscapedStringToScreen:ao,printUnescapedString:io,printUnescapedStringToScreen:Ct,readString:lo,reset:Bo,rest:Vo,seq:Go,subtract:go,swap:qo,switchCase:Bn,symbol:St,throwError:Uo,timeMs:bo,trim:co,vals:as,vec:To,vector:os,withMeta:jo};var Un=new Set(["!doctype","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","imgmap","input","kbd","label","legend","li","link","main","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","portal","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]),st=new Map;for(let e of Un)st.set(b(e),B($n(e)));function $n(e){return(...t)=>On(b(e),...t)}function On(...e){D(e.length,1);let t=e[0];K(t);let o=new Map,n=[];return E(e[1])?(e[1].value.forEach((u,y)=>o.set(y,u)),e.slice(2).forEach(u=>n.push(u))):e.slice(1).forEach(u=>n.push(u)),Ce(t.value,o,n)}function Kn(...e){s(e.length,1),d(e[0]);let t=e[0].value,o=document.querySelector(t);if(o===null)return r();let u=Array.from(o.attributes).reduce((y,c)=>y.set(c.name,l(c.value)),new Map);return Ce(o.tagName,u,[])}st.set(b("document.querySelector"),B(Kn));var fs=[["Array",Wn],["Array.from",cs],["Array.isArray",Hn],["Array.of",cs],["Array::at",jn],["Array::concat",_n],["Array::copyWithin",Qn],["Array::entries",zn],["Array::every",Jn],["Array::fill",Yn],["Array::filter",Xn],["Array::find",Zn],["Array::findIndex",er],["Array::findLast",tr],["Array::findLastIndex",or],["Array::flat",sr],["Array::flatMap",nr],["Array::includes",rr],["Array::indexOf",ur],["Array::join",pr],["Array::keys",yr],["Array::length",lr],["Array::map",ir],["Array::pop",ar],["Array::push",dr],["Array::reduce",cr],["Array::reverse",Ns],["Array::shift",Nr],["Array::slice",mr],["Array::some",Ar],["Array::sort",ms],["Array::splice",As],["Array::toReversed",Ns],["Array::toSorted",ms],["Array::toSpliced",As],["Array::unshift",fr],["Array::values",hr],["Array::with",gr],["Array.toString",xe.printEscapedString]];function Wn(...e){if(D(e.length,1),e.length===1&&x(e[0])){let t=Array(e[0].value).fill(r());return f(t)}return f(e)}function cs(...e){h(e.length,1,3),v(e[0]),e.length>=2&&w(e[1]),e.length===3&&A(e[2]);let t=Array.from(e[0].value,e[1]?.value,e[2]?.value);return f(t)}function jn(...e){s(e.length,2),v(e[0]),p(e[1]);let t=e[0].value,o=e[1].value,n=t.at(o);return n?i(n):r()}function Hn(...e){s(e.length,1),A(e[0]);let t=I(e[0]);return m(t)}function _n(...e){D(e.length,1),te(e,he);let t=e[0].value.concat(...e.slice(1).map(o=>o.value));return f(t)}function Qn(...e){h(e.length,1,4),v(e[0]),p(e[1]),p(e[2]);let t=e[0].value,o=e[1].value,n=e[2].value,u=x(e[3])?e[3].value:void 0,y=t.copyWithin(o,n,u);return f(y)}function zn(...e){s(e.length,1),v(e[0]);let t=e[0].value.map((o,n)=>{let u=a(n);return f([u,o])});return f(t)}function Jn(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value,n=t.every((u,y,c)=>o(a(y),u,f(c)).value);return m(n)}function Yn(...e){h(e.length,2,4),v(e[0]),A(e[1]);let t=e[0].value.map(Z),o=e[1].value,n;e.length>=3&&(p(e[2]),n=e[2].value);let u;e.length===4&&(p(e[3]),u=e[3].value);let y=t.fill(o,n,u);return f(y.map(i))}function Xn(...e){s(e.length,2),w(e[0]),v(e[1]);let t=e[0],n=e[1].value.filter(u=>Boolean(t.value(u).value));return f(n)}function Zn(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value;return t.find((u,y,c)=>o(u,a(y),f(c)).value)??r()}function er(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value,n=t.findIndex((u,y,c)=>o(u,a(y),f(c)).value);return a(n)}function tr(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value;return t.findLast((u,y,c)=>o(u,a(y),f(c)).value)??r()}function or(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value,n=t.findLastIndex((u,y,c)=>o(u,a(y),f(c)).value);return a(n)}function sr(...e){s(e.length,1),v(e[0]);let t=e[0].value;function o(u){return u.reduce((y,c)=>y.concat(I(c)?o(c.value):c),[])}let n=o(t);return f(n)}function nr(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value;function n(c){return c.reduce((g,k)=>g.concat(I(k)?n(k.value):k),[])}let u=t.map((c,g,k)=>o(c,a(g),f(k))),y=n(u);return f(y)}function rr(...e){s(e.length,2),v(e[0]),A(e[1]);let t=e[0],o=e[1],n=t.value.some(u=>re(u,o).value);return m(n)}function ur(...e){s(e.length,2),v(e[0]),A(e[1]);let t=e[0],o=e[1];for(let[n,u]of t.value.entries())if(re(u,o).value)return a(n);return a(-1)}function pr(...e){h(e.length,1,2),X(e[0]);let t=T(e[1])?e[1].value:" ",o=e[0].value.map(n=>q(n,!1)).join(t);return l(o)}function yr(...e){s(e.length,1),v(e[0]);let o=e[0].value.map((n,u)=>a(u));return f(o)}function ir(...e){h(e.length,2,3),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=t.map((y,c,g)=>{let k=o(y,a(c),n);return i(k)});return f(u)}function ar(...e){s(e.length,1),v(e[0]);let t=e[0],o=t.value[t.value.length-1];return i(o)}function dr(...e){if(D(e.length,2),!e.every(S))throw new TypeError("Invalid arguments.");return v(e[0]),f([...e[0].value,...e.slice(1)])}function lr(...e){s(e.length,1),v(e[0]);let t=e[0];return a(t.value.length)}function cr(...e){s(e.length,3),w(e[0]),v(e[1]);let t=e[0],o=e[1],n=e[2];for(let u of o.value)n=t.value(n,u);return n}function Ns(...e){s(e.length,1),v(e[0]);let o=e[0].value.toReversed();return f(o)}function Nr(...e){s(e.length,1),v(e[0]);let o=e[0].value[0];return o||r()}function mr(...e){h(e.length,1,3),v(e[0]);let t=0;e[1]!==void 0&&(p(e[1]),t=e[1].value);let o=e[0].value.length;return e[2]!==void 0&&(p(e[2]),o=e[2].value),f(e[0].value.slice(t,o))}function Ar(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value,n=t.some((u,y,c)=>o(u,a(y),f(c)).value);return m(n)}function ms(...e){s(e.length,2),v(e[0]),w(e[1]);let t=e[0].value,o=e[1].value,n=t.toSorted((u,y)=>{let c=o(u,y);return p(c),c.value});return f(n)}function As(...e){h(e.length,2,4),v(e[0]),p(e[1]);let t=e[0].value,o=e[1].value;if(e.length<3){let c=t.toSpliced(o);return f(c)}p(e[2]);let n=e[2].value,u=e.slice(3),y=t.toSpliced(o,n,...u);return f(y)}function fr(...e){s(e.length,2),v(e[1]);let t=[e[0],...e[1].value];return f(t)}function hr(...e){s(e.length,1),v(e[0]);let o=e[0].value.map(n=>n);return f(o)}function gr(...e){s(e.length,3),v(e[0]),p(e[1]),A(e[2]);let t=e[0],o=e[1],n=e[2],u=t.value.with(o.value,n);return f(u)}var hs=[["Boolean",vr]];function vr(...e){return s(e.length,1),A(e[0]),m(Boolean(e[0].value))}var gs=[["decodeURI",xr],["decodeURIComponent",br],["encodeURI",Cr],["encodeURIComponent",Sr]];function xr(...e){s(e.length,1),d(e[0]);let t=decodeURI(e[0].value);return l(t)}function br(...e){s(e.length,1),d(e[0]);let t=decodeURIComponent(e[0].value);return l(t)}function Cr(...e){s(e.length,1),d(e[0]);let t=encodeURI(e[0].value);return l(t)}function Sr(...e){s(e.length,1),d(e[0]);let t=encodeURIComponent(e[0].value);return l(t)}var vs=[["Date",Er],["Date.now",wr],["Date.parse",Tr],["Date.UTC",Mr],["Date.prototype.getDate",Dr],["Date.prototype.getDay",Pr],["Date.prototype.getFullYear",Vr],["Date.prototype.getHours",Lr],["Date.prototype.getMilliseconds",Fr],["Date.prototype.getMinutes",kr],["Date.prototype.getMonth",Ir],["Date.prototype.getSeconds",Rr],["Date.prototype.getTime",Br],["Date.prototype.getTimezoneOffset",qr],["Date.prototype.getUTCDate",Ur],["Date.prototype.getUTCDay",$r],["Date.prototype.getUTCFullYear",Or],["Date.prototype.getUTCHours",Kr],["Date.prototype.getUTCMilliseconds",Gr],["Date.prototype.getUTCMinutes",Wr],["Date.prototype.getUTCMonth",jr],["Date.prototype.getUTCSeconds",Hr],["Date.prototype.setDate",_r],["Date.prototype.setFullYear",Qr],["Date.prototype.setHours",zr],["Date.prototype.setMilliseconds",Jr],["Date.prototype.setMinutes",Yr],["Date.prototype.setMonth",Xr],["Date.prototype.setSeconds",Zr],["Date.prototype.setTime",eu],["Date.prototype.setUTCDate",tu],["Date.prototype.setUTCFullYear",ou],["Date.prototype.setUTCHours",su],["Date.prototype.setUTCMilliseconds",nu],["Date.prototype.setUTCMinutes",ru],["Date.prototype.setUTCMonth",uu],["Date.prototype.setUTCSeconds",pu],["Date.prototype.toDateString",yu],["Date.prototype.toISOString",iu],["Date.prototype.toJSON",au],["Date.prototype.toLocaleDateString",du],["Date.prototype.toLocaleString",lu],["Date.prototype.toLocaleTimeString",cu],["Date.prototype.toString",Nu],["Date.prototype.toTimeString",mu],["Date.prototype.toUTCString",Au]];function Er(...e){let t=e.map(Z),o=t.length>0?new Date(...t):new Date;return a(o.getTime())}function wr(...e){return a(Date.now())}function Tr(...e){s(e.length,1),d(e[0]);let t=Date.parse(e[0].value);return a(t)}function Mr(...e){let t=e.map(Z),o=Date.UTC(...t);return Number.isNaN(o)?r():a(o)}function Dr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getDate())}function Pr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getDay())}function Vr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getFullYear())}function Lr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getHours())}function Fr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getMilliseconds())}function kr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getMinutes())}function Ir(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getMonth())}function Rr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getSeconds())}function Br(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getTime())}function qr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getTimezoneOffset())}function Ur(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCDate())}function $r(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCDay())}function Or(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCFullYear())}function Kr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCHours())}function Gr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCMilliseconds())}function Wr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCMinutes())}function jr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCMonth())}function Hr(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return a(t.getUTCSeconds())}function _r(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setDate(e[1].value),a(t.getTime())}function Qr(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setFullYear(e[1].value),a(t.getTime())}function zr(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setHours(e[1].value),a(t.getTime())}function Jr(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setMilliseconds(e[1].value),a(t.getTime())}function Yr(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setMinutes(e[1].value),a(t.getTime())}function Xr(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setMonth(e[1].value),a(t.getTime())}function Zr(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setSeconds(e[1].value),a(t.getTime())}function eu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setTime(e[1].value),a(t.getTime())}function tu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCDate(e[1].value),a(t.getTime())}function ou(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCFullYear(e[1].value),a(t.getTime())}function su(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCHours(e[1].value),a(t.getTime())}function nu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCMilliseconds(e[1].value),a(t.getTime())}function ru(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCMinutes(e[1].value),a(t.getTime())}function uu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCMonth(e[1].value),a(t.getTime())}function pu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=new Date(e[0].value);return t.setUTCSeconds(e[1].value),a(t.getTime())}function yu(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return l(t.toDateString())}function iu(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return l(t.toISOString())}function au(...e){h(e.length,1,2),p(e[0]),e[1]&&d(e[1]);let t=new Date(e[0].value);return l(t.toJSON())}function du(...e){h(e.length,1,3),p(e[0]);let t=new Date(e[0].value),o=e.slice(1).map(Z);return l(t.toLocaleDateString(...o))}function lu(...e){h(e.length,1,3),p(e[0]);let t=new Date(e[0].value),o=e.slice(1).map(Z);return l(t.toLocaleString(...o))}function cu(...e){h(e.length,1,3),p(e[0]);let t=new Date(e[0].value),o=e.slice(1).map(Z);return l(t.toLocaleTimeString(...o))}function Nu(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return l(t.toString())}function mu(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return l(t.toTimeString())}function Au(...e){s(e.length,1),p(e[0]);let t=new Date(e[0].value);return l(t.toUTCString())}var xs=[["Error",fu],["Error.prototype.message",hu],["Error.prototype.cause",gu],["Error.prototype.name",vu]];function fu(...e){h(e.length,1,3);let t=e[0];d(t);let o;if(e[1]!==void 0){if(!T(e[1])&&!F(e[1]))throw new TypeError("Second argument must be a string or nil.");T(e[1])&&(Ae.assertErrorName(e[1]),o=e[1])}let n;return e[2]!==void 0&&(A(e[2]),n=e[2]),N(t,o??"Error",n)}function hu(...e){return s(e.length,1),$e(e[0]),e[0].value}function gu(...e){return s(e.length,1),$e(e[0]),e[0].cause??r()}function vu(...e){return s(e.length,1),$e(e[0]),e[0].name}var Cs=[["Function",bs],["Function.isFunction",xe.isFn],["Function.prototype.apply",xu],["Function.prototype.bind",Cu],["Function.prototype.call",bu],["js-eval",bs]];function bs(...e){s(e.length,1),d(e[0]);try{let t=new Function(`'use strict'; return (${e[0].value})`)();return i(t)}catch(t){return t instanceof Error?N(l(t.message)):N(l(JSON.stringify(t)))}}function xu(...e){s(e.length,2),w(e[0]),v(e[1]);let t=e[0].value.apply(null,e[1].value);return i(t)}function bu(...e){D(e.length,1),w(e[0]);let t=e[0].value.call(null,...e.slice(1));return i(t)}function Cu(...e){D(e.length,2),w(e[0]),A(e[1]);let t=e[0].value.bind(e[1],...e.slice(2));return i(t)}var Ss=[["Map.isMap",Su],["Map.new",Es],["Map.prototype.delete",Tu],["Map.prototype.entries",Eu],["Map.prototype.get",Mu],["Map.prototype.has",Du],["Map.prototype.keys",Pu],["Map.prototype.set",wu],["Map.prototype.size",Lu],["Map.prototype.values",Vu]];function Su(...e){return s(e.length,1),m(E(e[0]))}function Es(...e){if(e.length===0)return V();if(e.length===1&&E(e[0]))return V(new Map(e[0].value));Se(e.length);let t=V();for(let o=0;o<e.length;o+=2){let n=e[o];W(n),Ge(t.value,n,e[o+1])}return t}function Eu(...e){s(e.length,1),O(e[0]);let t=e[0].value.entries(),o=f();for(let[n,u]of t){let y=f([i(n),i(u)]);o.value.push(y)}return o}function wu(...e){D(e.length,1),O(e[0]);let t=e.slice(1),o=V(new Map(e[0].value)),n=Es(...t);for(let[u,y]of n.value.entries())o.value.set(u,y);return o}function Tu(...e){D(e.length,1),O(e[0]);let t=V(new Map(e[0].value));for(let o of e.splice(1))W(o),We(t.value,o);return t}function Mu(...e){s(e.length,2);let t=e[0];if(!E(t))return r();let o=e[1];W(o);let n=He(t.value,o);return n!==void 0?n:r()}function Du(...e){s(e.length,2);let t=e[0],o=e[1];return O(t),W(o),m(je(t.value,o))}function Pu(...e){return s(e.length,1),O(e[0]),_e(e[0].value)}function Vu(...e){return s(e.length,1),O(e[0]),C([...e[0].value.values()])}function Lu(...e){s(e.length,1);let t=e[0];if(F(t))return a(0);if(E(e[0]))return a(e[0].value.size);if(j(e[0]))return a(e[0].value.length);throw new TypeError("Invalid argument type")}var ws=[["Math.abs",Fu],["Math.acos",ku],["Math.acosh",Iu],["Math.asin",Ru],["Math.asinh",Bu],["Math.atan",qu],["Math.atan2",Uu],["Math.atanh",$u],["Math.cbrt",Ou],["Math.ceil",Ku],["Math.clz32",Gu],["Math.cos",Wu],["Math.cosh",ju],["Math.exp",Hu],["Math.expm1",_u],["Math.floor",Qu],["Math.fround",zu],["Math.hypot",Ju],["Math.imul",Yu],["Math.log",Xu],["Math.log10",Zu],["Math.log1p",ep],["Math.log2",tp],["Math.max",op],["Math.min",sp],["Math.pow",np],["Math.random",rp],["Math.round",up],["Math.sign",pp],["Math.sin",yp],["Math.sinh",ip],["Math.sqrt",ap],["Math.tan",dp],["Math.tanh",lp],["Math.trunc",cp],["Math.E",Np],["Math.LN10",mp],["Math.LN2",Ap],["Math.LOG10E",fp],["Math.LOG2E",hp],["Math.PI",gp],["Math.SQRT1_2",vp],["Math.SQRT2",xp]];function Fu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.abs(t);return i(o)}function ku(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.acos(t);return i(o)}function Iu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.acosh(t);return i(o)}function Ru(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.asin(t);return i(o)}function Bu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.asinh(t);return i(o)}function qu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.atan(t);return i(o)}function Uu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=e[0].value,o=e[1].value,n=Math.atan2(t,o);return i(n)}function $u(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.atanh(t);return i(o)}function Ou(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.cbrt(t);return i(o)}function Ku(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.ceil(t);return i(o)}function Gu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.clz32(t);return i(o)}function Wu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.cos(t);return i(o)}function ju(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.cosh(t);return i(o)}function Hu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.exp(t);return i(o)}function _u(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.expm1(t);return i(o)}function Qu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.floor(t);return i(o)}function zu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.fround(t);return i(o)}function Ju(...e){te(e,oe);let t=e.map(me),o=Math.hypot(...t);return i(o)}function Yu(...e){s(e.length,2),p(e[0]),p(e[1]);let t=e[0].value,o=e[1].value,n=Math.imul(t,o);return i(n)}function Xu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.log(t);return i(o)}function Zu(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.log10(t);return i(o)}function ep(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.log1p(t);return i(o)}function tp(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.log2(t);return i(o)}function op(...e){te(e,oe);let t=e.map(me),o=Math.max(...t);return i(o)}function sp(...e){te(e,oe);let t=e.map(me),o=Math.min(...t);return i(o)}function np(...e){if(e.length===2&&x(e[0])&&x(e[1])){let t=e[0].value,o=e[1].value,n=t**o;return i(n)}throw new TypeError('Invalid arguments to "Math.pow"')}function rp(...e){if(e.length===0){let t=Math.random();return i(t)}throw new TypeError('Invalid arguments to "Math.random"')}function up(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.round(t);return i(o)}function pp(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.sign(t);return i(o)}function yp(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.sin(t);return i(o)}function ip(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.sinh(t);return i(o)}function ap(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.sqrt(t);return i(o)}function dp(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.tan(t);return i(o)}function lp(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.tanh(t);return i(o)}function cp(...e){s(e.length,1),p(e[0]);let t=e[0].value,o=Math.trunc(t);return i(o)}function Np(...e){if(e.length===0)return i(Math.E);throw new TypeError('Invalid arguments to "Math.E"')}function mp(...e){if(e.length===0)return i(Math.LN10);throw new TypeError('Invalid arguments to "Math.LN10"')}function Ap(...e){if(e.length===0)return i(Math.LN2);throw new TypeError('Invalid arguments to "Math.LN2"')}function fp(...e){if(e.length===0)return i(Math.LOG10E);throw new TypeError('Invalid arguments to "Math.LOG10E"')}function hp(...e){if(e.length===0)return i(Math.LOG2E);throw new TypeError('Invalid arguments to "Math.LOG2E"')}function gp(...e){if(e.length===0)return i(Math.PI);throw new TypeError('Invalid arguments to "Math.PI"')}function vp(...e){if(e.length===0)return i(Math.SQRT1_2);throw new TypeError('Invalid arguments to "Math.SQRT1_2"')}function xp(...e){if(e.length===0)return i(Math.SQRT2);throw new TypeError('Invalid arguments to "Math.SQRT2"')}var Ts=[["Number",bp],["Number.isFinite",Cp],["Number.isInteger",Sp],["Number.isNaN",Ep],["Number.isSafeInteger",wp],["Number.parseFloat",Tp],["Number.parseInt",Mp],["Number.prototype.toExponential",Bp],["Number.prototype.toFixed",qp],["Number.prototype.toPrecision",Up],["Number.prototype.toString",$p],["Number.EPSILON",Dp],["Number.MAX_SAFE_INTEGER",Pp],["Number.MAX_VALUE",Vp],["Number.MIN_SAFE_INTEGER",Lp],["Number.MIN_VALUE",Fp],["Number.NaN",kp],["Number.NEGATIVE_INFINITY",Ip],["Number.POSITIVE_INFINITY",Rp]];function bp(...e){if(e.length===1&&S(e[0])){let t=e[0].value,o=Number(t);return i(o)}throw new TypeError('Invalid arguments to "Number"')}function Cp(...e){if(e.length===1&&S(e[0])){let t=e[0].value,o=Number.isFinite(t);return i(o)}throw new TypeError('Invalid arguments to "Number.isFinite"')}function Sp(...e){if(e.length===1&&S(e[0])){let t=e[0].value,o=Number.isInteger(t);return i(o)}throw new TypeError('Invalid arguments to "Number.isInteger"')}function Ep(...e){if(e.length===1&&S(e[0])){let t=e[0].value,o=Number.isNaN(t);return i(o)}throw new TypeError('Invalid arguments to "Number.isNaN"')}function wp(...e){if(e.length===1&&S(e[0])){let t=e[0].value,o=Number.isSafeInteger(t);return i(o)}throw new TypeError('Invalid arguments to "Number.isSafeInteger"')}function Tp(...e){s(e.length,1),d(e[0]);let t=Ee(e[0]),o=Number.parseFloat(t);return i(o)}function Mp(...e){h(e.length,1,2),d(e[0]);let t=e[0].value;if(e.length===2){p(e[1]);let n=e[1].value,u=Number.parseInt(t,n);return a(u)}let o=Number.parseInt(t);return a(o)}function Dp(...e){if(e.length===0){let t=Number.EPSILON;return i(t)}throw new TypeError('Invalid arguments to "Number.EPSILON"')}function Pp(...e){if(e.length===0){let t=Number.MAX_SAFE_INTEGER;return i(t)}throw new TypeError('Invalid arguments to "Number.MAX_SAFE_INTEGER"')}function Vp(...e){if(e.length===0){let t=Number.MAX_VALUE;return i(t)}throw new TypeError('Invalid arguments to "Number.MAX_VALUE"')}function Lp(...e){if(e.length===0){let t=Number.MIN_SAFE_INTEGER;return i(t)}throw new TypeError('Invalid arguments to "Number.MIN_SAFE_INTEGER"')}function Fp(...e){if(e.length===0){let t=Number.MIN_VALUE;return i(t)}throw new TypeError('Invalid arguments to "Number.MIN_VALUE"')}function kp(...e){if(e.length===0){let t=Number.NaN;return i(t)}throw new TypeError('Invalid arguments to "Number.NaN"')}function Ip(...e){if(e.length===0){let t=Number.NEGATIVE_INFINITY;return i(t)}throw new TypeError('Invalid arguments to "Number.NEGATIVE_INFINITY"')}function Rp(...e){if(e.length===0){let t=Number.POSITIVE_INFINITY;return i(t)}throw new TypeError('Invalid arguments to "Number.POSITIVE_INFINITY"')}function Bp(...e){if(h(e.length,1,2),p(e[0]),e.length===2){p(e[1]);let o=e[1].value,n=e[0].value.toExponential(o);return l(n)}let t=e[0].value.toExponential();return l(t)}function qp(...e){if(h(e.length,1,2),p(e[0]),e.length===2){p(e[1]);let o=e[1].value,n=e[0].value.toFixed(o);return l(n)}let t=e[0].value.toFixed();return l(t)}function Up(...e){if(h(e.length,1,2),p(e[0]),e.length===2){p(e[1]);let o=e[1].value,n=e[0].value.toPrecision(o);return l(n)}let t=e[0].value.toPrecision();return l(t)}function $p(...e){if(h(e.length,1,2),p(e[0]),e.length===2){p(e[1]);let o=e[1].value,n=e[0].value.toString(o);return l(n)}let t=e[0].value.toString();return l(t)}var Ms=[["typeof",ty],["instanceof",oy],["neq",Xp],["nullish",sy],["power",ny],["remainder",Gp],["rshift",zp],["lshift",Qp],["rshift-unsigned",Jp],["bit-and",Wp],["bit-or",jp],["bit-xor",Hp],["bit-not",_p],["and",Op],["or",Kp],["not",Yp],["increment",Zp],["decrement",ey]];function Op(...e){for(let o of e)if(!Ke(o,!0))return m(!1);return m(!0)}function Kp(...e){for(let t of e)if(Ke(t))return m(!0);return m(!1)}function Gp(e,t){if(x(e)&&x(t))return a((e.value%t.value+t.value)%t.value);throw new TypeError("not a number")}function Wp(e,t){if(x(e)&&x(t))return a(e.value&t.value);throw new TypeError("not a number")}function jp(e,t){if(x(e)&&x(t))return a(e.value|t.value);throw new TypeError("not a number")}function Hp(e,t){if(x(e)&&x(t))return a(e.value^t.value);throw new TypeError("not a number")}function _p(e){if(x(e))return a(~e.value);throw new TypeError("not a number")}function Qp(e,t){if(x(e)&&x(t))return a(e.value<<t.value);throw new TypeError("not a number")}function zp(e,t){if(x(e)&&x(t))return a(e.value>>t.value);throw new TypeError("not a number")}function Jp(e,t){if(x(e)&&x(t))return a(e.value>>>t.value);throw new TypeError("not a number")}function Yp(e){return m(!e.value)}function Xp(...e){s(e.length,2);let t=re(e[0],e[1]);return m(!t.value)}function Zp(...e){h(e.length,1,2),p(e[0]);let t="postfix";if(e[1]!==void 0){if(d(e[1]),e[1].value!=="prefix"&&e[1].value!=="postfix")throw new TypeError(`Invalid affix ${String(e[1].value)}. The affix must be "prefix" or "postfix"`);t=e[1].value}if(t==="postfix")return f([a(e[0].value+1),a(e[0].value)]);if(t==="prefix")return f([a(e[0].value+1),a(e[0].value+1)]);throw new Error("Unhandled error in decrement")}function ey(...e){h(e.length,1,2),p(e[0]);let t="postfix";if(e[1]!==void 0){if(d(e[1]),e[1].value!=="prefix"&&e[1].value!=="postfix")throw new TypeError(`Invalid affix ${String(e[1].value)}. The affix must be "prefix" or "postfix"`);t=e[1].value}if(t==="postfix")return f([a(e[0].value-1),a(e[0].value)]);if(t==="prefix")return f([a(e[0].value-1),a(e[0].value-1)]);throw new Error("Unhandled error in decrement")}function ty(...e){s(e.length,2),A(e[0]),d(e[1]);let t=typeof e[0].value;if(t!=="bigint"&&t!=="boolean"&&t!=="function"&&t!=="number"&&t!=="object"&&t!=="string"&&t!=="symbol"&&t!=="undefined")throw new Error(`Invalid type: "${e[1].value}". Type must be one of bigint, boolean, function, number, object, string, symbol, or undefined`);return m(t===e[1].value)}function oy(...e){s(e.length,2),A(e[0]),d(e[1]);let t=e[0],o=e[1].value,n;if(o==="AstNode"||o==="AtomNode"||o==="BooleanNode"||o==="ErrorNode"||o==="FunctionNode"||o==="KeywordNode"||o==="ListNode"||o==="MapNode"||o==="NilNode"||o==="NumberNode"||o==="StringNode"||o==="SymbolNode"||o==="VectorNode")n=P[e[1].value];else if(Object.hasOwn(globalThis,e[1].value))n=globalThis[e[1].value];else throw new TypeError(`Unknown instance: "${e[1].value}"`);return m(t instanceof n)}function sy(e,t){return e.value==null?t:e}function ny(e,t){if(x(e)&&x(t))return a(e.value**t.value);throw new TypeError("not a number")}var Ds=[["RegExp.new",ry],["RegExp.prototype.exec",uy],["RegExp.prototype.test",py]];function ry(...e){h(e.length,1,2),d(e[0]);let t=e[0].value;if(e.length===2){d(e[1]);let n=e[1].value,u=new RegExp(t,n);return R(u)}let o=new RegExp(t);return R(o)}function uy(...e){s(e.length,2),M(e[0]);let t=e[0].value;ye(t),d(e[1]);let o=e[1].value,n=t.exec(o);return n?f(n.map(i)):r()}function py(...e){s(e.length,2),M(e[0]),ye(e[0].value),d(e[1]);let t=e[0].value.test(e[1].value);return m(t)}var Ls=[["String",xe.printUnescapedString],["String.fromCharCode",yy],["String.fromCodePoint",iy],["String.prototype.at",Ps],["String.prototype.charAt",Ps],["String.prototype.charCodeAt",Vs],["String.prototype.codePointAt",Vs],["String.prototype.concat",ay],["String.prototype.endsWith",dy],["String.prototype.includes",ly],["String.prototype.indexOf",cy],["String.prototype.isWellFormed",Ny],["String.prototype.lastIndexOf",my],["String.prototype.length",Ay],["String.prototype.localeCompare",fy],["String.prototype.match",hy],["String.prototype.matchAll",gy],["String.prototype.normalize",vy],["String.prototype.padEnd",xy],["String.prototype.padStart",by],["String.prototype.repeat",Cy],["String.prototype.replace",Sy],["String.prototype.replaceAll",Ey],["String.prototype.search",wy],["String.prototype.slice",Ty],["String.prototype.split",My],["String.prototype.startsWith",Dy],["String.prototype.toLocaleLowerCase",Py],["String.prototype.toLocaleUpperCase",Vy],["String.prototype.toLowerCase",Ly],["String.prototype.toUpperCase",Fy],["String.prototype.toWellFormed",ky],["String.prototype.trim",Iy],["String.prototype.trimEnd",Ry],["String.prototype.trimStart",By],["String.raw",qy]];function yy(...e){s(e.length,1),v(e[0]),te(e[0].value,oe);let t=e[0].value.map(me),o=String.fromCharCode(...t);return l(o)}function iy(...e){te(e,oe);let t=e.map(me),o=String.fromCodePoint(...t);return l(o)}function Ps(...e){s(e.length,2),d(e[0]),p(e[1]);let t=String.prototype.at.call(e[0].value,e[1].value);return t===void 0?r():l(t)}function Vs(...e){s(e.length,2),d(e[0]),p(e[1]);let t=String.prototype.codePointAt.call(e[0].value,e[1].value);return t===void 0?r():a(t)}function ay(...e){D(e.length,2),te(e,le);let t=e[0].value,o=e.slice(1).map(Ee),n=String.prototype.concat.call(t,...o);return l(n)}function dy(...e){h(e.length,2,3),d(e[0]),d(e[1]),e.length===3&&p(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=String.prototype.endsWith.call(t,o,n);return i(u)}function ly(...e){h(e.length,2,3),d(e[0]),d(e[1]),e.length===3&&p(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=String.prototype.includes.call(t,o,n);return i(u)}function cy(...e){h(e.length,2,3),d(e[0]),d(e[1]),e.length===3&&p(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=String.prototype.indexOf.call(t,o,n);return i(u)}function Ny(...e){s(e.length,1),d(e[0]);let t=e[0].value,o=String.prototype.isWellFormed.call(t);return i(o)}function my(...e){h(e.length,2,3),d(e[0]),d(e[1]),e.length===3&&p(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=String.prototype.lastIndexOf.call(t,o,n);return i(u)}function Ay(...e){s(e.length,1),A(e[0]);let o=e[0].value.length;return i(o)}function fy(...e){h(e.length,2,4),d(e[0]),d(e[1]);let t=e[0].value,o=e[1].value,n,u;if(e.length>2){let c=e[2];T(c)?n=c.value:I(c)?(te(c.value,le),n=c.value.map(Ee)):(rt(c),n=void 0)}if(e.length>3){let c=e[3];O(c),u=ze(c)}let y=String.prototype.localeCompare.call(t,o,n,u);return i(y)}function hy(...e){s(e.length,2),d(e[0]),M(e[1]),ye(e[1].value);let t=e[0].value,o=e[1].value,n=String.prototype.match.call(t,o);return i(n)}function gy(...e){s(e.length,2),d(e[0]),M(e[1]),ye(e[1].value);let t=e[0].value,o=e[1].value,n=String.prototype.matchAll.call(t,o);return i(n)}function vy(...e){h(e.length,1,2),A(e[0]),e.length===2&&d(e[1]);let t=e[0].value,o=e.length===2?e[1].value:void 0,n=String.prototype.normalize.call(t,o);return i(n)}function xy(...e){h(e.length,2,3),A(e[0]),p(e[1]),e.length===3&&d(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=String.prototype.padEnd.call(t,o,n);return i(u)}function by(...e){h(e.length,2,3),A(e[0]),p(e[1]),e.length===3&&d(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=String.prototype.padStart.call(t,o,n);return i(u)}function Cy(...e){s(e.length,2),d(e[0]),p(e[1]);let t=e[0].value,o=e[1].value,n=String.prototype.repeat.call(t,o);return i(n)}function Sy(...e){s(e.length,3),d(e[0]);let t="";T(e[1])||(M(e[1]),ye(e[1].value)),t=e[1].value;let o;if(T(e[2]))o=e[2].value;else throw new Error("Function replacers are not implemented for String.prototype.replace");let u=e[0].value.replace(t,o);return i(u)}function Ey(...e){s(e.length,3),d(e[0]);let t="";T(e[1])||(M(e[1]),ye(e[1].value)),t=e[1].value;let o;if(T(e[2]))o=e[2].value;else throw new Error("Function replacers are not implemented for String.prototype.replaceAll");let u=e[0].value.replaceAll(t,o);return i(u)}function wy(...e){s(e.length,2),d(e[0]),M(e[1]),ye(e[1].value);let t=e[0].value,o=e[1].value,n=String.prototype.search.call(t,o);return i(n)}function Ty(...e){h(e.length,1,3),A(e[0]),e.length>1&&p(e[1]),e.length>2&&p(e[2]);let t=e[0].value,o=e.length>1?e[1].value:void 0,n=e.length>2?e[2].value:void 0,u=String.prototype.slice.call(t,o,n);return i(u)}function My(...e){h(e.length,2,3),d(e[0]),d(e[1]),e.length===3&&p(e[2]);let t=e[0].value,o=e[1].value,n=e.length===3?e[2].value:void 0,u=t.split(o,n);return i(u)}function Dy(...e){h(e.length,2,3),A(e[0]),d(e[1]),e.length===3&&p(e[2]);let t=e[0].value,o=e[1].value,n=e.length>2?e[2].value:void 0,u=String.prototype.startsWith.call(t,o,n);return i(u)}function Py(...e){h(e.length,1,2),A(e[0]),e.length===2&&(F(e[1])||d(e[1]));let t=e[0].value,o=e.length===2&&!F(e[1])?e[1].value:void 0,n=String.prototype.toLocaleLowerCase.call(t,o);return i(n)}function Vy(...e){h(e.length,1,2),A(e[0]),e.length===2&&(F(e[1])||d(e[1]));let t=e[0].value,o=e.length===2&&!F(e[1])?e[1].value:void 0,n=String.prototype.toLocaleUpperCase.call(t,o);return i(n)}function Ly(...e){s(e.length,1),A(e[0]);let t=e[0].value,o=String.prototype.toLowerCase.call(t);return i(o)}function Fy(...e){s(e.length,1),A(e[0]);let t=e[0].value,o=String.prototype.toUpperCase.call(t);return i(o)}function ky(...e){s(e.length,1),A(e[0]);let t=e[0].value,o=String.prototype.toWellFormed.call(t);return i(o)}function Iy(...e){s(e.length,1),A(e[0]);let t=e[0].value,o=String.prototype.trim.call(t);return i(o)}function Ry(...e){s(e.length,1),A(e[0]);let t=e[0].value,o=String.prototype.trimEnd.call(t);return i(o)}function By(...e){s(e.length,1),A(e[0]);let t=e[0].value,o=String.prototype.trimStart.call(t);return i(o)}function qy(...e){s(e.length,2),O(e[0]),v(e[1]);let t=ze(e[0]),o=e[1].value,n=String.raw(t,...o);return i(n)}var Fs=[["Symbol",Uy],["Symbol.for",$y],["Symbol.keyFor",Oy]];function Uy(...e){h(e.length,0,1),e.length===1&&d(e[0]);let t=e.length===1?e[0].value:void 0,o=Symbol(t);return R(o)}function $y(...e){s(e.length,1),d(e[0]);let t=e[0].value,o=Symbol.for(t);return R(o)}function Oy(...e){s(e.length,1),M(e[0]),ut(e[0].value);let t=e[0].value,o=Symbol.keyFor(t);return o?l(o):r()}var Ky=[...fs,...hs,...gs,...Ms,...vs,...xs,...Cs,...Ss,...ws,...Ts,...Ds,...Ls,...Fs],Je=new Map;for(let[e,t]of Ky)if(Je.set(b(e),B(t)),e.includes(".prototype.")){let o=e.replace(".prototype.","::");Je.set(b(o),B(t))}else if(e.includes(".prototype[")){let o=e.replace(".prototype[","::[");Je.set(b(o),B(t))}var wt=new Map,Wy=[["add-event-listener",ql],["prevent-default",Bs],["get-element-by-id",jy],["query-selector",Hy],["set-attribute",Rs],["get-attribute",ks],["CustomEvent::new",_y],["CustomEvent::prototype",Qy],["CustomEvent.detail",zy],["CustomEvent::initCustomEvent",Jy],["Document::addEventListener",$s],["Document::adoptNode",Xi],["Document::captureEvents",Zi],["Document::caretPositionFromPoint",ea],["Document::caretRangeFromPoint",ta],["Document::clear",oa],["Document::close",sa],["Document::createAttribute",na],["Document::createAttributeNS",ra],["Document::createCDATASection",ua],["Document::createComment",pa],["Document::createDocumentFragment",ya],["Document::createElement",ia],["Document::createElementNS",aa],["Document::createEvent",da],["Document::createNodeIterator",la],["Document::createProcessingInstruction",ca],["Document::createRange",Na],["Document::createTextNode",ma],["Document::createTreeWalker",Aa],["Document::execCommand",fa],["Document::exitFullscreen",ha],["Document::exitPictureInPicture",ga],["Document::exitPointerLock",va],["Document::getElementById",qs],["Document::getElementsByClassName",xa],["Document::getElementsByName",ba],["Document::getElementsByTagName",Ca],["Document::getElementsByTagNameNS",Sa],["Document::getSelection",Ea],["Document::hasFocus",wa],["Document::hasStorageAccess",Ta],["Document::importNode",Ma],["Document::new",Yy],["Document::open",Da],["Document::parseHTMLUnsafe",Zy],["Document::prototype",Xy],["Document::queryCommandEnabled",Pa],["Document::queryCommandIndeterm",Va],["Document::queryCommandState",La],["Document::queryCommandSupported",Fa],["Document::queryCommandValue",ka],["Document::querySelector",Us],["Document::releaseEvents",Ia],["Document::removeEventListener",$a],["Document::requestStorageAccess",Ra],["Document::startViewTransition",Ba],["Document::write",qa],["Document::writeln",Ua],["Document.alinkColor",ti],["Document.all",oi],["Document.anchors",si],["Document.applets",ni],["Document.bgColor",ri],["Document.body",ui],["Document.characterSet",pi],["Document.charset",yi],["Document.compatMode",ii],["Document.contentType",ai],["Document.cookie",di],["Document.currentScript",li],["Document.defaultView",ci],["Document.designMode",Ni],["Document.dir",mi],["Document.doctype",Ai],["Document.documentElement",fi],["Document.documentURI",hi],["Document.domain",gi],["Document.embeds",vi],["Document.fgColor",xi],["Document.forms",bi],["Document.fragmentDirective",Ci],["Document.fullscreen",Si],["Document.fullscreenEnabled",Ei],["Document.head",wi],["Document.hidden",Ti],["Document.images",Mi],["Document.implementation",Di],["Document.inputEncoding",Pi],["Document.lastModified",Vi],["Document.linkColor",Li],["Document.links",Fi],["Document.onfullscreenchange",ki],["Document.onfullscreenerror",Ii],["Document.onpointerlockchange",Ri],["Document.onpointerlockerror",Bi],["Document.onreadystatechange",qi],["Document.onvisibilitychange",Ui],["Document.ownerDocument",$i],["Document.pictureInPictureEnabled",Oi],["Document.plugins",Ki],["Document.readyState",Gi],["Document.referrer",Wi],["Document.rootElement",ji],["Document.scripts",Hi],["Document.scrollingElement",_i],["Document.timeline",Qi],["Document.title",zi],["Document.URL",ei],["Document.visibilityState",Ji],["Document.vlinkColor",Yi],["DocumentFragment::getElementById",Ks],["DocumentFragment::new",_a],["DocumentFragment::prototype",Qa],["DocumentFragment.ownerDocument",za],["DocumentFragment::querySelector",Os],["DocumentTimeline::new",Oa],["DocumentTimeline::prototype",Ka],["DocumentType::new",Ja],["DocumentType::prototype",Ya],["DocumentType.name",Ga],["DocumentType.ownerDocument",Wa],["DocumentType.publicId",ja],["DocumentType.systemId",Ha],["Element::addEventListener",Ws],["Element::attachShadow",Ed],["Element::checkVisibility",wd],["Element::closest",Td],["Element::computedStyleMap",Md],["Element::getAttribute",ks],["Element::getAttributeNames",Dd],["Element::getAttributeNode",Pd],["Element::getAttributeNodeNS",Is],["Element::getAttributeNS",Is],["Element::getBoundingClientRect",Vd],["Element::getClientRects",Ld],["Element::getElementsByClassName",Fd],["Element::getElementsByTagName",kd],["Element::getElementsByTagNameNS",Id],["Element::getHTML",Rd],["Element::hasAttribute",Bd],["Element::hasAttributeNS",qd],["Element::hasAttributes",Ud],["Element::hasPointerCapture",$d],["Element::insertAdjacentElement",Od],["Element::insertAdjacentHTML",Kd],["Element::insertAdjacentText",Gd],["Element::matches",Wd],["Element::new",Xa],["Element::prototype",Za],["Element::querySelector",Gs],["Element::releasePointerCapture",jd],["Element::removeAttribute",Hd],["Element::removeAttributeNode",Qd],["Element::removeAttributeNS",_d],["Element::removeEventListener",yl],["Element::requestFullscreen",zd],["Element::requestPointerLock",Jd],["Element::scroll",Yd],["Element::scrollBy",Xd],["Element::scrollIntoView",Zd],["Element::scrollTo",el],["Element::setAttribute",Rs],["Element::setAttributeNode",ol],["Element::setAttributeNodeNS",sl],["Element::setAttributeNS",tl],["Element::setHTMLUnsafe",nl],["Element::setPointerCapture",rl],["Element::toggleAttribute",ul],["Element::webkitMatchesSelector",pl],["Element.attributes",ed],["Element.classList",td],["Element.className",od],["Element.clientHeight",sd],["Element.clientLeft",nd],["Element.clientTop",rd],["Element.clientWidth",ud],["Element.currentCSSZoom",pd],["Element.id",yd],["Element.innerHTML",id],["Element.localName",ad],["Element.namespaceURI",dd],["Element.onfullscreenchange",ld],["Element.onfullscreenerror",cd],["Element.outerHTML",Nd],["Element.ownerDocument",md],["Element.part",Ad],["Element.prefix",fd],["Element.scrollHeight",hd],["Element.scrollLeft",gd],["Element.scrollTop",vd],["Element.scrollWidth",xd],["Element.shadowRoot",bd],["Element.slot",Cd],["Element.tagName",Sd],["Event::AT_TARGET",cl],["Event::BUBBLING_PHASE",Nl],["Event::CAPTURING_PHASE",ll],["Event::composedPath",Ll],["Event::initEvent",Fl],["Event::new",il],["Event::NONE",dl],["Event::preventDefault",Bs],["Event::prototype",al],["Event::stopImmediatePropagation",kl],["Event::stopPropagation",Il],["Event.AT_TARGET",Pl],["Event.bubbles",ml],["Event.BUBBLING_PHASE",Vl],["Event.cancelable",fl],["Event.cancelBubble",Al],["Event.CAPTURING_PHASE",Dl],["Event.composed",hl],["Event.currentTarget",gl],["Event.defaultPrevented",vl],["Event.eventPhase",xl],["Event.isTrusted",bl],["Event.NONE",Ml],["Event.returnValue",Cl],["Event.srcElement",Sl],["Event.target",El],["Event.timeStamp",wl],["Event.type",Tl],["EventTarget::new",Rl],["EventTarget::prototype",Bl],["EventTarget::addEventListener",js],["EventTarget::dispatchEvent",Ul],["EventTarget::removeEventListener",$l]];for(let[e,t]of Wy)wt.set(b(e),B(t));function jy(...e){return h(e.length,1,2),e[0].value instanceof DocumentFragment?Ks(...e):qs(...e)}function Hy(...e){if(h(e.length,1,2),e.length===1&&e[0].value instanceof Document)return Us(...e);if(M(e[0]),e.length===2&&e[0].value instanceof DocumentFragment)return Os(...e);if(e.length===2&&e[0].value instanceof Element)return Gs(...e);throw N("querySelector expects a Document, DocumentFragment or Element as the first parameter.","TypeError",e[0])}function _y(...e){return s(e.length,1),r()}function Qy(...e){return s(e.length,1),r()}function zy(...e){return s(e.length,1),r()}function Jy(...e){return s(e.length,1),r()}function Yy(...e){return s(e.length,1),r()}function Xy(...e){return s(e.length,1),r()}function Zy(...e){return s(e.length,1),r()}function ei(...e){return s(e.length,1),r()}function ti(...e){return s(e.length,1),r()}function oi(...e){return s(e.length,1),r()}function si(...e){return s(e.length,1),r()}function ni(...e){return s(e.length,1),r()}function ri(...e){return s(e.length,1),r()}function ui(...e){return s(e.length,1),r()}function pi(...e){return s(e.length,1),r()}function yi(...e){return s(e.length,1),r()}function ii(...e){return s(e.length,1),r()}function ai(...e){return s(e.length,1),r()}function di(...e){return s(e.length,1),r()}function li(...e){return s(e.length,1),r()}function ci(...e){return s(e.length,1),r()}function Ni(...e){return s(e.length,1),r()}function mi(...e){return s(e.length,1),r()}function Ai(...e){return s(e.length,1),r()}function fi(...e){return s(e.length,1),r()}function hi(...e){return s(e.length,1),r()}function gi(...e){return s(e.length,1),r()}function vi(...e){return s(e.length,1),r()}function xi(...e){return s(e.length,1),r()}function bi(...e){return s(e.length,1),r()}function Ci(...e){return s(e.length,1),r()}function Si(...e){return s(e.length,1),r()}function Ei(...e){return s(e.length,1),r()}function wi(...e){return s(e.length,1),r()}function Ti(...e){return s(e.length,1),r()}function Mi(...e){return s(e.length,1),r()}function Di(...e){return s(e.length,1),r()}function Pi(...e){return s(e.length,1),r()}function Vi(...e){return s(e.length,1),r()}function Li(...e){return s(e.length,1),r()}function Fi(...e){return s(e.length,1),r()}function ki(...e){return s(e.length,1),r()}function Ii(...e){return s(e.length,1),r()}function Ri(...e){return s(e.length,1),r()}function Bi(...e){return s(e.length,1),r()}function qi(...e){return s(e.length,1),r()}function Ui(...e){return s(e.length,1),r()}function $i(...e){return s(e.length,1),r()}function Oi(...e){return s(e.length,1),r()}function Ki(...e){return s(e.length,1),r()}function Gi(...e){return s(e.length,1),r()}function Wi(...e){return s(e.length,1),r()}function ji(...e){return s(e.length,1),r()}function Hi(...e){return s(e.length,1),r()}function _i(...e){return s(e.length,1),r()}function Qi(...e){return s(e.length,1),r()}function zi(...e){return s(e.length,1),r()}function Ji(...e){return s(e.length,1),r()}function Yi(...e){return s(e.length,1),r()}function Xi(...e){return s(e.length,1),r()}function Zi(...e){return s(e.length,1),r()}function ea(...e){return s(e.length,1),r()}function ta(...e){return s(e.length,1),r()}function oa(...e){return s(e.length,1),r()}function sa(...e){return s(e.length,1),r()}function na(...e){return s(e.length,1),r()}function ra(...e){return s(e.length,1),r()}function ua(...e){return s(e.length,1),r()}function pa(...e){return s(e.length,1),r()}function ya(...e){return s(e.length,1),r()}function ia(...e){return s(e.length,1),r()}function aa(...e){return s(e.length,1),r()}function da(...e){return s(e.length,1),r()}function la(...e){return s(e.length,1),r()}function ca(...e){return s(e.length,1),r()}function Na(...e){return s(e.length,1),r()}function ma(...e){return s(e.length,1),r()}function Aa(...e){return s(e.length,1),r()}function fa(...e){return s(e.length,1),r()}function ha(...e){return s(e.length,1),r()}function ga(...e){return s(e.length,1),r()}function va(...e){return s(e.length,1),r()}function qs(...e){s(e.length,1),d(e[0]);let t=Document.prototype.getElementById.call(document,e[0].value);return t?R(t):r()}function xa(...e){return s(e.length,1),r()}function ba(...e){return s(e.length,1),r()}function Ca(...e){return s(e.length,1),r()}function Sa(...e){return s(e.length,1),r()}function Ea(...e){return s(e.length,1),r()}function wa(...e){return s(e.length,1),r()}function Ta(...e){return s(e.length,1),r()}function Ma(...e){return s(e.length,1),r()}function Da(...e){return s(e.length,1),r()}function Pa(...e){return s(e.length,1),r()}function Va(...e){return s(e.length,1),r()}function La(...e){return s(e.length,1),r()}function Fa(...e){return s(e.length,1),r()}function ka(...e){return s(e.length,1),r()}function Us(...e){s(e.length,1),d(e[0]);let t=Document.prototype.querySelector.call(document,e[0].value);return t?R(t):r()}function Ia(...e){return s(e.length,1),r()}function Ra(...e){return s(e.length,1),r()}function Ba(...e){return s(e.length,1),r()}function qa(...e){return s(e.length,1),r()}function Ua(...e){return s(e.length,1),r()}function $s(...e){return s(e.length,2),d(e[0]),w(e[1]),Document.prototype.addEventListener.call(document,e[0].value,t=>{e[1].value(R(t))}),r()}function $a(...e){return s(e.length,1),r()}function Oa(...e){return s(e.length,1),r()}function Ka(...e){return s(e.length,1),r()}function Ga(...e){return s(e.length,1),r()}function Wa(...e){return s(e.length,1),r()}function ja(...e){return s(e.length,1),r()}function Ha(...e){return s(e.length,1),r()}function _a(...e){return s(e.length,1),r()}function Qa(...e){return s(e.length,1),r()}function Os(...e){if(s(e.length,2),M(e[0]),d(e[1]),!(e[0].value instanceof DocumentFragment))throw N("querySelector expects a DocumentFragment as the first parameter.","TypeError",e[0]);let t=DocumentFragment.prototype.querySelector.call(e[0].value,e[1].value);return t?R(t):r()}function za(...e){return s(e.length,1),r()}function Ks(...e){s(e.length,1),d(e[0]),M(e[1]);let t=DocumentFragment.prototype.getElementById.call(e[0].value,e[1].value);return t?R(t):r()}function Ja(...e){return s(e.length,1),r()}function Ya(...e){return s(e.length,1),r()}function Xa(...e){return s(e.length,1),r()}function Za(...e){return s(e.length,1),r()}function Gs(...e){if(s(e.length,2),M(e[0]),d(e[1]),!(e[0].value instanceof Element))throw N("querySelector expects an Element as the first parameter.","TypeError",e[0]);let t=Element.prototype.querySelector.call(e[0].value,e[1].value);return t?R(t):r()}function ed(...e){return s(e.length,1),r()}function td(...e){return s(e.length,1),r()}function od(...e){return s(e.length,1),r()}function sd(...e){return s(e.length,1),r()}function nd(...e){return s(e.length,1),r()}function rd(...e){return s(e.length,1),r()}function ud(...e){return s(e.length,1),r()}function pd(...e){return s(e.length,1),r()}function yd(...e){return s(e.length,1),r()}function id(...e){return s(e.length,1),r()}function ad(...e){return s(e.length,1),r()}function dd(...e){return s(e.length,1),r()}function ld(...e){return s(e.length,1),r()}function cd(...e){return s(e.length,1),r()}function Nd(...e){return s(e.length,1),r()}function md(...e){return s(e.length,1),r()}function Ad(...e){return s(e.length,1),r()}function fd(...e){return s(e.length,1),r()}function hd(...e){return s(e.length,1),r()}function gd(...e){return s(e.length,1),r()}function vd(...e){return s(e.length,1),r()}function xd(...e){return s(e.length,1),r()}function bd(...e){return s(e.length,1),r()}function Cd(...e){return s(e.length,1),r()}function Sd(...e){return s(e.length,1),r()}function Ed(...e){return s(e.length,1),r()}function wd(...e){return s(e.length,1),r()}function Td(...e){return s(e.length,1),r()}function Md(...e){return s(e.length,1),r()}function ks(...e){s(e.length,2),M(e[0]),d(e[1]);let t=Element.prototype.getAttribute.call(e[0].value,e[1].value);return t?l(t):r()}function Dd(...e){return s(e.length,1),r()}function Pd(...e){return s(e.length,1),r()}function Is(...e){return s(e.length,1),r()}function Vd(...e){return s(e.length,1),r()}function Ld(...e){return s(e.length,1),r()}function Fd(...e){return s(e.length,1),r()}function kd(...e){return s(e.length,1),r()}function Id(...e){return s(e.length,1),r()}function Rd(...e){return s(e.length,1),r()}function Bd(...e){return s(e.length,1),r()}function qd(...e){return s(e.length,1),r()}function Ud(...e){return s(e.length,1),r()}function $d(...e){return s(e.length,1),r()}function Od(...e){return s(e.length,1),r()}function Kd(...e){return s(e.length,1),r()}function Gd(...e){return s(e.length,1),r()}function Wd(...e){return s(e.length,1),r()}function jd(...e){return s(e.length,1),r()}function Hd(...e){return s(e.length,1),r()}function _d(...e){return s(e.length,1),r()}function Qd(...e){return s(e.length,1),r()}function zd(...e){return s(e.length,1),r()}function Jd(...e){return s(e.length,1),r()}function Yd(...e){return s(e.length,1),r()}function Xd(...e){return s(e.length,1),r()}function Zd(...e){return s(e.length,1),r()}function el(...e){return s(e.length,1),r()}function Rs(...e){return s(e.length,3),M(e[0]),d(e[1]),d(e[2]),Element.prototype.setAttribute.call(e[0].value,e[1].value,e[2].value),r()}function tl(...e){return s(e.length,1),r()}function ol(...e){return s(e.length,1),r()}function sl(...e){return s(e.length,1),r()}function nl(...e){return s(e.length,1),r()}function rl(...e){return s(e.length,1),r()}function ul(...e){return s(e.length,1),r()}function pl(...e){return s(e.length,1),r()}function Ws(...e){if(s(e.length,3),M(e[0]),d(e[1]),w(e[2]),!(e[0].value instanceof Element))throw N("addEventListener expects an Element as the first parameter.","TypeError",e[0]);return Element.prototype.addEventListener.call(e[0].value,e[1].value,t=>{e[2].value(R(t))}),r()}function yl(...e){return s(e.length,1),r()}function il(...e){return s(e.length,1),r()}function al(...e){return s(e.length,1),r()}function dl(...e){return s(e.length,1),r()}function ll(...e){return s(e.length,1),r()}function cl(...e){return s(e.length,1),r()}function Nl(...e){return s(e.length,1),r()}function ml(...e){return s(e.length,1),r()}function Al(...e){return s(e.length,1),r()}function fl(...e){return s(e.length,1),r()}function hl(...e){return s(e.length,1),r()}function gl(...e){return s(e.length,1),r()}function vl(...e){return s(e.length,1),r()}function xl(...e){return s(e.length,1),r()}function bl(...e){return s(e.length,1),r()}function Cl(...e){return s(e.length,1),r()}function Sl(...e){return s(e.length,1),r()}function El(...e){return s(e.length,1),r()}function wl(...e){return s(e.length,1),r()}function Tl(...e){return s(e.length,1),r()}function Ml(...e){return s(e.length,1),r()}function Dl(...e){return s(e.length,1),r()}function Pl(...e){return s(e.length,1),r()}function Vl(...e){return s(e.length,1),r()}function Ll(...e){return s(e.length,1),r()}function Fl(...e){return s(e.length,1),r()}function Bs(...e){if(s(e.length,1),M(e[0]),!(e[0].value instanceof Event))throw N("preventDefault expects an Event as the first parameter.","TypeError",e[0]);return Event.prototype.preventDefault.call(e[0].value),r()}function kl(...e){return s(e.length,1),r()}function Il(...e){return s(e.length,1),r()}function Rl(...e){return s(e.length,1),r()}function Bl(...e){return s(e.length,1),r()}function ql(...e){if(h(e.length,2,3),e[0].value instanceof Document)return $s(...e);if(e[0].value instanceof EventTarget)return js(...e);if(e[0].value instanceof Element)return Ws(...e);throw N("addEventListener expects an Document, Element, or EventTarget as the first parameter.","TypeError",e[0])}function js(...e){if(s(e.length,3),M(e[0]),d(e[1]),w(e[2]),!(e[0].value instanceof EventTarget))throw N("addEventListener expects an EventTarget as the first parameter.","TypeError",e[0]);return EventTarget.prototype.addEventListener.call(e[0].value,e[1].value,t=>{e[2].value(R(t))}),r()}function Ul(...e){return s(e.length,1),r()}function $l(...e){return s(e.length,1),r()}function Kl(e){return ot(e)}function Mt(e){if(E(e)||U(e))return C([b("quote"),e]);if(!j(e))return e;if(Xe(e,"unquote"))return e.value[1];let n=C([]);for(let u=e.value.length-1;u>=0;u--){let y=e.value[u];n=Xe(y,"splice-unquote")?C([b("concat"),y.value[1],n]):C([b("cons"),Mt(y),n])}return I(e)&&(n=C([b("vec"),n])),n}function Gl(e,t){if(!L(e)||!(e.value[0]instanceof de))return!1;let o=e.value[0],n=t.findEnv(o);if(!Fe(n))return!1;let u=n.get(o);return G(u)?u.isMacro:!1}function Hs(e,t){let o=e;for(;Gl(o,t);){let n=o,u=n.value[0];o=t.get(u).value(...n.value.slice(1))}return o}function Tt(e,t){if(U(e))return t.get(e);if(I(e)){let o=e.value.map(n=>ee(n,t));return f(o)}if(L(e)){let o=e.value.map(n=>ee(n,t));return C(o)}if(E(e)){let o=new Map;for(let[n,u]of e.value.entries())o.set(n,ee(u,t));return V(o)}if(pe(e)){let o=e.value,n=Array.from(e.attributes).reduce((y,[c,g])=>y.set(c,ee(g,t)),new Map),u=e.children.map(y=>ee(y,t));return Ce(o,n,u)}return e}function ee(e,t){for(;;){if(L(e)===!1)return Tt(e,t);if(e.value.length===0)return e;if(e=Hs(e,t),L(e)===!1)return Tt(e,t);if(e.value.length===0)return e;let o=U(e.value[0])?e.value[0].value:"goto_default_clause",n;switch(o){case"var":case"def!":{n=jl(e,t);break}case"const":case"let*":{n=_l(e,t);break}case"quote":{n=zl(e,t);break}case"quasiquoteexpand":{n=Yl(e,t);break}case"quasiquote":{n=Zl(e,t);break}case"defmacro!":{n=tc(e,t);break}case"macroexpand":{n=Ne(Hs(e.value[1],t));break}case"try":case"try*":{n=rc(e,t);break}case"do":{n=sc(e,t);break}case"if":{n=pc(e,t);break}case"function":case"fn*":{n=ic(e,t);break}default:n=ac(e,t)}if(n.return)return n.return;e=n.continue.ast,t=n.continue.env}}function Wl(e){_(e),s(e.value.length,3,e),K(e.value[0]);let t=e.value[0];if(t.value!=="var")throw N("Expected var to be called with the value var. This is a bug.","TypeError",t);W(e.value[1]),A(e.value[2])}function jl(e,t){Wl(e);let o=e.value[1],n=e.value[2],u=ee(n,t);return Ne(t.set(o,u))}function Hl(e){_(e),s(e.value.length,3,e),K(e.value[0]);let t=e.value[0];if(t.value!=="const")throw N("Expected let to be called with let but it wasn't. This is a bug with Ensemble.","TypeError",t);X(e.value[1]),A(e.value[2]),Se(e.value[1].value.length,e);for(let o=0;o<e.value[1].value.length;o+=2)K(e.value[1].value[o]),A(e.value[1].value[o+1])}function _l(e,t){Hl(e);let o=e.value[1],n=o.value.length,u=new ie(t);for(let y=0;y<n;y+=2){let c=o.value[y],g=o.value[y+1],k=ee(g,u);u.set(c,k)}return ke(e.value[2],u)}function Ql(e){_(e),s(e.value.length,2,e),K(e.value[0]),ve(e.value[0],"quote"),A(e.value[1])}function zl(e,t){return Ql(e),Ne(e.value[1])}function Jl(e){let t="quasiquoteexpand";_(e),s(e.value.length,2),K(e.value[0]),ve(e.value[0],t),A(e.value[1])}function Yl(e,t){return Jl(e),Ne(Mt(e.value[1]))}function Xl(e){let t="quasiquote";_(e),s(e.value.length,2),K(e.value[0]),ve(e.value[0],t),A(e.value[1])}function Zl(e,t){Xl(e);let o=Mt(e.value[1]);return ke(o,t)}function ec(e){let t="defmacro!";_(e),s(e.value.length,3),K(e.value[0]),ve(e.value[0],t),W(e.value[1]),A(e.value[2])}function tc(e,t){ec(e);let o=e.value[1],n=e.value[2],u=ee(n,t),y=H(u);return G(y)&&(y.isMacro=!0),Ne(t.set(o,y))}function oc(e){let t="do";_(e),D(e.value.length,1),K(e.value[0]),ve(e.value[0],t);for(let o of e.value.slice(1))A(o)}function sc(e,t){oc(e);let o=r();for(let n=1;n<e.value.length;n++)o=ee(e.value[n],t);return{continue:{ast:o,env:t},return:void 0}}function nc(e){_(e),h(e.value.length,2,3);let t=e.value[0];if(K(t),t.value!=="try")throw N("Expected try/catch to be called with try. This is a bug.","SyntaxError",t);if(A(e.value[1]),e.value[2]){_(e.value[2]),s(e.value[2].value.length,3,e.value[2]),K(e.value[2].value[0]);let o=e.value[2].value[0];if(o.value!=="catch")throw N("Expected a catch in the body of a try expression","SyntaxError",o);K(e.value[2].value[1]),A(e.value[2].value[2])}}function rc(e,t){nc(e);try{return{return:ee(e.value[1],t),continue:void 0}}catch(o){if(!e.value[2])throw o;let n=e.value[2].value[1],u=e.value[2].value[2],y;J(o)?y=o:o instanceof Error?y=l(o.message):y=l(JSON.stringify(o));let c=N(y),g=new ie(t,[n],[c]);return{return:ee(u,g),continue:void 0}}}function uc(e){let t="if";_(e),h(e.value.length,3,4),K(e.value[0]),ve(e.value[0],t),A(e.value[1]),A(e.value[2]),Fe(e.value[3])&&A(e.value[3])}function pc(e,t){uc(e);let o=e.value[1],n=ee(o,t);if(n.value!==!1&&n.value!==null){let u=e.value[2];return ke(u,t)}if(e.value[3]!==void 0){let u=e.value[3];return ke(u,t)}return Ne(r())}function yc(e){_(e),s(e.value.length,3),K(e.value[0]);let t=e.value[0];if(!["fn*","function","=>"].includes(t.value))throw N("Expected function to be called with function but it wasn't. This is a bug with Ensemble.","TypeError",t);X(e.value[1]),te(e.value[1].value,de),A(e.value[2])}function ic(e,t){yc(e);let o=e.value[1].value,n=e.value[2],u=t,c=B((...g)=>{let k=new ie(u,o,g);return ee(n,k)},{ast:n,env:u,parameters:o});return Ne(c)}function ac(e,t){let o=Tt(e,t);_(o);let n=o.value[0];if(G(n)){let u=o.value.slice(1);if(n.closureMeta){let c=n.closureMeta.ast,g=new ie(n.closureMeta.env,n.closureMeta.parameters,u);return{continue:{ast:c,env:g},return:void 0}}return{return:n.value(...u),continue:void 0}}return{return:n,continue:void 0}}function dc(e){return q(e,!0)}function qe(e,t){try{return dc(ee(Kl(e),t))}catch(o){J(o)?console.log(q(o,!1)):o instanceof Error?console.log(o):console.log(JSON.stringify(o))}return""}function _s(){let e=new ie(void 0);for(let[t,o]of xe.ns.entries())e.set(t,o);for(let[t,o]of Je.entries())e.set(t,o);for(let[t,o]of st.entries())e.set(t,o);for(let[t,o]of wt.entries())e.set(t,o);return e.set(b("eval"),B((...t)=>(s(t.length,1),ee(t[0],e)))),e.set(b("dump"),B((...t)=>{let o=e.serialize();return console.log(q(o,!0)),r()})),e}var zs="user> ";function Js(e,t){let o=null;try{o=ae.open(t,"w"),o!==null&&o.puts(e)}catch(n){throw o!==null&&o.close(),new Error(`Error writing to file: ${n}`)}}function Dt(...e){s(e.length,1);let t=e[0];d(t);let o=Xs(t.value);return o==null?r():l(o)}function Ys(...e){s(e.length,1),d(e[0]);let t=[],[o,n]=Qs.readdir(e[0].value);if(+n>0)throw new Error(`Error reading directory: ${n}`);for(let u of o)u==="."||u===".."||t.push(l(u));return f(t)}function nt(...e){s(e.length,1);let t=e[0];d(t);let o=ae.loadFile(t.value);if(o===null)throw new Error("No such file or directory. xxx");return l(o)}function Pt(...e){s(e.length,2);let t=e[0];d(t);let o=e[1];return d(o),Js(o.value,t.value),r()}function Xs(e=zs){return ae.out.puts(e),ae.in.getline()?.trim()||null}function*Zs(e=zs){for(;;){ae.out.puts(e);let t=ae.in.getline()?.trim();!t||(yield t)}}function en(e){return function(...o){s(o.length,1),d(o[0]);let n=nt(o[0]);d(n);let u=new ie(e),y=qe(`(do ${n.value})
nil`,u);return l(y)}}function tn(){let e=_s(),t=en(e),o=[["readFile",nt],["slurp",nt],["load-file",t],["import",t],["readln",Dt],["prompt",Dt],["readir",Ys],["spit",Pt],["writeFile",Pt]];for(let[n,u]of o)e.set(b(n),B(u));return e}function on(e=""){return e.replace(/\\/g,"/")}async function lc(...e){let t=tn(),o=on(e[0]),n=e.slice(1).map(u=>l(u));if(t.set(b("*ARGV*"),C(n)),t.set(b("*host-language*"),l("Ensemble")),o){qe(`(import "${o}")`,t);return}qe('(println (str "Welcome to " *host-language* "! Press Ctrl/Cmd+C to exit."))',t);for await(let u of Zs("user> "))if(!(u===""||u===null))try{let y=qe(u,t);console.log(y)}catch(y){J(y)?console.log(q(y,!1)):(y instanceof Error,console.log(y))}}var sn={displayPrompt:Xs,initMain:tn,loadFileWithEnv:en,main:lc,readir:Ys,readline:Zs,readln:Dt,rep:qe,slurp:nt,spit:Pt,toPosixPath:on,writeToFile:Js};sn.main(...scriptArgs);
